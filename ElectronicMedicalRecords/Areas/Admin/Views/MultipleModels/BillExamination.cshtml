@model ElectronicMedicalRecords.Models.MultiplesModel
@{
    Layout = "~/Areas/Admin/Views/Shared/_LayoutMultipleModel.cshtml";
}
<style>
    .card-header hr {
        color: #009688;
    }

    .patient-taginpust .bootstrap-tagsinput {
        width: 100%;
        padding: 0.375rem 0.75rem;
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        color: #607080;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #dce7f1;
        -webkit-appearance: none;
        -moz-appearance: none;
        border-radius: 0.25rem;
        transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
        box-shadow: unset
    }

        .patient-taginpust .bootstrap-tagsinput .label-info {
            background-color: #435ebe;
            border-radius: 4px;
            padding: 4px
        }

    .table-bordered tr:first-child {
        background-color: #435ebe;
        color: #fff;
        padding: 5px 0;
        text-align: center
    }

    .table-bordered tr:nth-child(2) td {
        border-width: 1px;
    }

    .table-bordered td {
        border-width: 1px
    }

    .pd-0px {
        padding: 0 1rem;
    }

    .navbar-nav {
        display: none
    }

    .choices[data-type*=select-one].is-open:after {
        margin-top: -10px;
    }

    a {
        cursor: pointer
    }

    td input {
        width: 100%
    }
</style>
<header class="mb-3">
    <a href="#" class="burger-btn d-block d-xl-none">
        <i class="bi bi-justify fs-3"></i>
    </a>
</header>
@using (Html.BeginForm("Payment", "MultipleModels", FormMethod.Post, new { id = "createTest" }))
{
    @Html.AntiForgeryToken()
    <div class="col-md-12">
        <div class="card">
            <div class="card-body">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <a class="nav-link active" id="home-tab" data-bs-toggle="tab" href="#home"
                           role="tab" aria-controls="home" aria-selected="true">Hồ Sơ</a>
                    </li>
                    @if (Model.Detail_HistoryDiseases1.Count != 0 || Model.Detail_HistoryDiseases2.Count != 0 || Model.Detail_HistoryDiseases3.Count != 0
                        || Model.Detail_MedicalHistories.Count != 0)
                    {
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="history-tab" data-bs-toggle="tab" href="#history"
                               role="tab" aria-controls="history" aria-selected="true">Tiền Sử, Bệnh Sử</a>
                        </li>
                    }
                    @if (Model.Detail_TuanHoans.Count != 0 || Model.Detail_HoHaps.Count != 0 || Model.Detail_TieuHoas.Count != 0 || Model.Detail_ThanTietNieus.Count != 0
                        || Model.Detail_CoXuongKhops.Count != 0 || Model.Detail_ThanKinhs.Count != 0 || Model.Detail_TamThans.Count != 0 || Model.Detail_NgoaiKhoas.Count != 0
                        || Model.Detail_SanPhuKhoas.Count != 0 || Model.Detail_Mats.Count != 0 || Model.Detail_TaiMuiHongs.Count != 0 || Model.Detail_RangHamMats.Count != 0 
                        || Model.Detail_DaLieus.Count != 0 || Model.Clinical != null)
                    {
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="home-tab" data-bs-toggle="tab" href="#LamSang"
                               role="tab" aria-controls="home" aria-selected="true">Lâm Sàng</a>
                        </li>
                    }
                    @if (Model.Detail_CTMaus.Count != 0)
                    {
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#profile"
                               role="tab" aria-controls="profile" aria-selected="false">Công Thức Máu</a>
                        </li>
                    }
                    @if (Model.Detail_SinhHoaMaus.Count != 0)
                    {
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#SinhHoaMau"
                               role="tab" aria-controls="profile" aria-selected="false">Sinh Hóa Máu</a>
                        </li>
                    }
                    @if (Model.Detail_DongMaus.Count != 0)
                    {
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#DongMau"
                               role="tab" aria-controls="profile" aria-selected="false">Đông Máu</a>
                        </li>
                    }
                    @if (Model.Detail_NhomMaus.Count != 0)
                    {
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#NhomMau"
                               role="tab" aria-controls="profile" aria-selected="false">Nhóm Máu</a>
                        </li>
                    }
                    @if (Model.Detail_Urines.Count != 0)
                    {
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#urine"
                               role="tab" aria-controls="profile" aria-selected="false">Nước Tiểu</a>
                        </li>
                    }
                    @if (Model.Detail_Immunes.Count != 0)
                    {
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#immune"
                               role="tab" aria-controls="profile" aria-selected="false">Miễn Dịch</a>
                        </li>
                    }
                    @if (Model.Detail_Amniocentes.Count != 0)
                    {
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#amniocente"
                               role="tab" aria-controls="profile" aria-selected="false">Dịch Chọc Dò</a>
                        </li>
                    }
                    @if (Model.Detail_ViSinhs.Count != 0)
                    {
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#visinh"
                               role="tab" aria-controls="profile" aria-selected="false">Vi Sinh</a>
                        </li>
                    }
                </ul>
                <div class="ms-4 col-12 d-flex justify-content-start pt-4">
                    <div class="btn-group dropend me-1 mb-1">
                        <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            In
                        </button>
                        <div class="dropdown-menu" style="margin: 0px;">
                            <h6 class="dropdown-header">Chọn Mục In</h6>
                            <a class="dropdown-item" id="PrintBillExamination">In Hóa Đơn Khám Bệnh</a>
                            @if (Model.InformationExamination.User_ID != null)
                            {
                                if (Model.InformationExamination.PriceTest == null)
                                {
                                    <a class="dropdown-item" id="PrintBillTestSubclinical">
                                        In Hóa Đơn Xét Nghiệm
                                    </a>
                                }
                                <a class="dropdown-item" id="PrintBillPrescription">In Hóa Đơn Toa Thuốc </a>
                            }
                        </div>
                    </div>
                </div>
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="home" role="tabpanel"
                         aria-labelledby="home-tab">
                        <p class='my-2'>
                            <section id="multiple-column-form">
                                <div class="row match-height">
                                    <div class="col-12">
                                        <div class="card">
                                            @{
                                                Html.RenderAction("BillCheck", "InformationExaminations", new { multiplesModel = Model });
                                                Html.RenderAction("BillExamination", "Patients", new { multiplesModel = Model });
                                                Html.RenderAction("DetailIE", "Prescription_Detail", new { multiplesModel = Model });
                                            }
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </p>
                    </div>
                    <div class="tab-pane fade show" id="history" role="tabpanel"
                         aria-labelledby="history-tab">
                        <p class='my-2'>
                            <section id="multiple-column-form">
                                <div class="row match-height">
                                    <div class="col-12">
                                        <div class="card">
                                            @{
                                                if(Model.Detail_HistoryDiseases1.Count != 0 || Model.Detail_HistoryDiseases2.Count != 0 || Model.Detail_HistoryDiseases3.Count != 0)
                                                {
                                                    Html.RenderAction("BillCheck", "Detail_HistoryDisease", new { multiplesModel = Model });
                                                }
                                                if(Model.Detail_MedicalHistories.Count != 0)
                                                {
                                                    Html.RenderAction("BillCheck", "Detail_MedicalHistory", new { multiplesModel = Model });
                                                }
                                            }
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </p>
                    </div>
                    <div class="tab-pane fade" id="LamSang" role="tabpanel"
                         aria-labelledby="profile-tab">
                        <div class="page-heading">
                            <section class="section">
                                <div class="card">
                                    <ul class="nav nav-tabs" id="mySubTab" role="tablist">
                                        @if (Model.Detail_TuanHoans.Count != 0 || Model.Detail_HoHaps.Count != 0 || Model.Detail_TieuHoas.Count != 0 || Model.Detail_ThanTietNieus.Count != 0
                                                || Model.Detail_CoXuongKhops.Count != 0 || Model.Detail_ThanKinhs.Count != 0 || Model.Detail_TamThans.Count != 0)
                                        {
                                            <li class="nav-item" role="presentation">
                                                <a class="nav-link active" id="NoiKhoa-tab" data-bs-toggle="tab" href="#NoiKhoa"
                                                   role="tab" aria-controls="home" aria-selected="true">Nội Khoa</a>
                                            </li>
                                        }
                                        @if (Model.Detail_NgoaiKhoas.Count != 0)
                                        {
                                            <li class="nav-item" role="presentation">
                                                <a class="nav-link" id="NgoaiKhoa-tab" data-bs-toggle="tab" href="#NgoaiKhoa"
                                                   role="tab" aria-controls="history" aria-selected="true">Ngoại Khoa</a>
                                            </li>
                                        }
                                        @if (Model.Detail_SanPhuKhoas.Count != 0)
                                        {
                                            <li class="nav-item" role="presentation">
                                                <a class="nav-link" id="SanPhuKhoa-tab" data-bs-toggle="tab" href="#SanPhuKhoa"
                                                   role="tab" aria-controls="home" aria-selected="true">Sản Phụ Khoa</a>
                                            </li>
                                        }
                                        @if (Model.Detail_Mats.Count != 0 || Model.Clinical != null)
                                        {
                                            <li class="nav-item" role="presentation">
                                                <a class="nav-link" id="Mat-tab" data-bs-toggle="tab" href="#Mat"
                                                   role="tab" aria-controls="home" aria-selected="true">Mắt</a>
                                            </li>
                                        }
                                        @if (Model.Detail_TaiMuiHongs.Count != 0 || Model.Clinical != null)
                                        {
                                            <li class="nav-item" role="presentation">
                                                <a class="nav-link" id="TaiMuiHong-tab" data-bs-toggle="tab" href="#TaiMuiHong"
                                                   role="tab" aria-controls="home" aria-selected="true">Tai-Mũi-Họng</a>
                                            </li>
                                        }
                                        @if (Model.Detail_RangHamMats.Count != 0 || Model.Clinical != null)
                                        {
                                            <li class="nav-item" role="presentation">
                                                <a class="nav-link" id="RangHamMat-tab" data-bs-toggle="tab" href="#RangHamMat"
                                                   role="tab" aria-controls="home" aria-selected="true">Răng-Hàm-Mặt</a>
                                            </li>
                                        }
                                        @if (Model.Detail_DaLieus.Count != 0)
                                        {
                                            <li class="nav-item" role="presentation">
                                                <a class="nav-link" id="DaLieu-tab" data-bs-toggle="tab" href="#DaLieu"
                                                   role="tab" aria-controls="home" aria-selected="true">Da Liễu</a>
                                            </li>
                                        }

                                    </ul>
                                    <div class="tab-content" id="myTabContent">
                                        @if (Model.Detail_TuanHoans.Count != 0 || Model.Detail_HoHaps.Count != 0 || Model.Detail_TieuHoas.Count != 0 || Model.Detail_ThanTietNieus.Count != 0
                                                    || Model.Detail_CoXuongKhops.Count != 0 || Model.Detail_ThanKinhs.Count != 0 || Model.Detail_TamThans.Count != 0)
                                        {
                                            <div class="tab-pane fade show active" id="NoiKhoa" role="tabpanel"
                                                 aria-labelledby="home-tab">
                                                <p class='my-2'>
                                                    <section id="multiple-column-form">
                                                        <div class="row match-height">
                                                            <div class="col-12">
                                                                <div class="card">
                                                                    @{
                                                                        if (Model.Detail_TuanHoans.Count != 0)
                                                                        {
                                                                            Html.RenderAction("BillCheck", "Detail_TuanHoan", new { multiplesModel = Model });
                                                                            <br />
                                                                        }
                                                                        if (Model.Detail_HoHaps.Count != 0)
                                                                        {
                                                                            Html.RenderAction("BillCheck", "Detail_HoHap", new { multiplesModel = Model });
                                                                            <br />
                                                                        }
                                                                        if (Model.Detail_TieuHoas.Count != 0)
                                                                        {
                                                                            Html.RenderAction("BillCheck", "Detail_TieuHoa", new { multiplesModel = Model });
                                                                            <br />
                                                                        }
                                                                        if (Model.Detail_ThanTietNieus.Count != 0)
                                                                        {
                                                                            Html.RenderAction("BillCheck", "Detail_ThanTietNieu", new { multiplesModel = Model });
                                                                            <br />
                                                                        }
                                                                        if (Model.Detail_CoXuongKhops.Count != 0)
                                                                        {
                                                                            Html.RenderAction("BillCheck", "Detail_CoXuongKhop", new { multiplesModel = Model });
                                                                            <br />
                                                                        }
                                                                        if (Model.Detail_ThanKinhs.Count != 0)
                                                                        {
                                                                            Html.RenderAction("BillCheck", "Detail_ThanKinh", new { multiplesModel = Model });
                                                                            <br />
                                                                        }
                                                                        if (Model.Detail_TamThans.Count != 0)
                                                                        {
                                                                            Html.RenderAction("BillCheck", "Detail_TamThan", new { multiplesModel = Model });
                                                                        }
                                                                    }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </section>
                                                </p>
                                            </div>
                                        }
                                        <div class="tab-pane fade" id="NgoaiKhoa" role="tabpanel"
                                             aria-labelledby="home-tab">
                                            <p class='my-2'>
                                                <section id="multiple-column-form">
                                                    <div class="row match-height">
                                                        <div class="col-12">
                                                            <div class="card">
                                                                @{
                                                                    if (Model.Detail_NgoaiKhoas.Count != 0)
                                                                    {
                                                                        Html.RenderAction("BillCheck", "Detail_NgoaiKhoa", new { multiplesModel = Model });
                                                                    }
                                                                }
                                                            </div>
                                                        </div>
                                                    </div>
                                                </section>
                                            </p>
                                        </div>

                                        <div class="tab-pane fade" id="SanPhuKhoa" role="tabpanel"
                                             aria-labelledby="home-tab">
                                            <p class='my-2'>
                                                <section id="multiple-column-form">
                                                    <div class="row match-height">
                                                        <div class="col-12">
                                                            <div class="card">
                                                                @{
                                                                    if (Model.Detail_SanPhuKhoas.Count != 0)
                                                                    {
                                                                        Html.RenderAction("BillCheck", "Detail_SanPhuKhoa", new { multiplesModel = Model });
                                                                    }
                                                                }
                                                            </div>
                                                        </div>
                                                    </div>
                                                </section>
                                            </p>
                                        </div>

                                        <div class="tab-pane fade" id="Mat" role="tabpanel"
                                             aria-labelledby="home-tab">
                                            <p class='my-2'>
                                                <section id="multiple-column-form">
                                                    <div class="row match-height">
                                                        <div class="col-12">
                                                            <div class="card">
                                                                @{
                                                                    if (Model.Detail_Mats.Count != 0 || Model.Clinical != null)
                                                                    {
                                                                        Html.RenderAction("BillCheck", "Detail_Mat", new { multiplesModel = Model });
                                                                    }
                                                                }
                                                            </div>
                                                        </div>
                                                    </div>
                                                </section>
                                            </p>
                                        </div>

                                        <div class="tab-pane fade" id="TaiMuiHong" role="tabpanel"
                                             aria-labelledby="home-tab">
                                            <p class='my-2'>
                                                <section id="multiple-column-form">
                                                    <div class="row match-height">
                                                        <div class="col-12">
                                                            <div class="card">
                                                                @{
                                                                    if (Model.Detail_TaiMuiHongs.Count != 0 || Model.Clinical != null)
                                                                    {
                                                                        Html.RenderAction("BillCheck", "Detail_TaiMuiHong", new { multiplesModel = Model });
                                                                    }
                                                                }
                                                            </div>
                                                        </div>
                                                    </div>
                                                </section>
                                            </p>
                                        </div>

                                        <div class="tab-pane fade" id="RangHamMat" role="tabpanel"
                                             aria-labelledby="home-tab">
                                            <p class='my-2'>
                                                <section id="multiple-column-form">
                                                    <div class="row match-height">
                                                        <div class="col-12">
                                                            <div class="card">
                                                                @{
                                                                    if (Model.Detail_RangHamMats.Count != 0 || Model.Clinical != null)
                                                                    {
                                                                        Html.RenderAction("BillCheck", "Detail_RangHamMat", new { multiplesModel = Model });
                                                                    }
                                                                }
                                                            </div>
                                                        </div>
                                                    </div>
                                                </section>
                                            </p>
                                        </div>

                                        <div class="tab-pane fade" id="DaLieu" role="tabpanel"
                                             aria-labelledby="home-tab">
                                            <p class='my-2'>
                                                <section id="multiple-column-form">
                                                    <div class="row match-height">
                                                        <div class="col-12">
                                                            <div class="card">
                                                                @{
                                                                    if (Model.Detail_DaLieus.Count != 0)
                                                                    {
                                                                        Html.RenderAction("BillCheck", "Detail_DaLieu", new { multiplesModel = Model });
                                                                    }
                                                                }
                                                            </div>
                                                        </div>
                                                    </div>
                                                </section>
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
                    @if (Model.Detail_CTMaus.Count != 0)
                    {
                        <div class="tab-pane fade" id="profile" role="tabpanel"
                             aria-labelledby="profile-tab">
                            <div class="page-heading">
                                <section class="section">
                                    <div class="card">
                                        @{
                                            Html.RenderAction("BillCheck", "Detail_CTMau", new { multiplesModel = Model });
                                        }
                                    </div>
                                </section>
                            </div>
                        </div>
                    }
                    @if (Model.Detail_SinhHoaMaus.Count != 0)
                    {
                        <div class="tab-pane fade" id="SinhHoaMau" role="tabpanel"
                             aria-labelledby="profile-tab">
                            <div class="page-heading">
                                <section class="section">
                                    <div class="card">
                                        @{
                                            Html.RenderAction("BillCheck", "Detail_SinhHoaMau", new { multiplesModel = Model });
                                        }
                                    </div>
                                </section>
                            </div>
                        </div>
                    }
                    @if (Model.Detail_DongMaus.Count != 0)
                    {
                        <div class="tab-pane fade" id="DongMau" role="tabpanel"
                             aria-labelledby="profile-tab">
                            <div class="page-heading">
                                <section class="section">
                                    <div class="card">
                                        @{
                                            Html.RenderAction("BillCheck", "Detail_DongMau", new { multiplesModel = Model });
                                        }
                                    </div>
                                </section>
                            </div>
                        </div>
                    }
                    @if (Model.Detail_NhomMaus.Count != 0)
                    {
                        <div class="tab-pane fade" id="NhomMau" role="tabpanel"
                             aria-labelledby="profile-tab">
                            <div class="page-heading">
                                <section class="section">
                                    <div class="card">
                                        @{
                                            Html.RenderAction("BillCheck", "Detail_NhomMau", new { multiplesModel = Model });
                                        }
                                    </div>
                                </section>
                            </div>
                        </div>
                    }
                    @if (Model.Detail_Urines.Count != 0)
                    {
                        <div class="tab-pane fade" id="urine" role="tabpanel"
                             aria-labelledby="profile-tab">
                            <div class="page-heading">
                                <section class="section">
                                    <div class="card">
                                        @{
                                            Html.RenderAction("BillCheck", "Detail_Urine", new { multiplesModel = Model });
                                        }
                                    </div>
                                </section>
                            </div>
                        </div>
                    }
                    @if (Model.Detail_Immunes.Count != 0)
                    {
                        <div class="tab-pane fade" id="immune" role="tabpanel"
                             aria-labelledby="profile-tab">
                            <div class="page-heading">
                                <section class="section">
                                    <div class="card">
                                        @{
                                            Html.RenderAction("BillCheck", "Detail_Immune", new { multiplesModel = Model });
                                        }
                                    </div>
                                </section>
                            </div>
                        </div>
                    }
                    @if (Model.Detail_Amniocentes.Count != 0)
                    {
                        <div class="tab-pane fade" id="amniocente" role="tabpanel"
                             aria-labelledby="profile-tab">
                            <div class="page-heading">
                                <section class="section">
                                    <div class="card">
                                        @{
                                            Html.RenderAction("BillCheck", "Detail_Amniocente", new { multiplesModel = Model });
                                        }
                                    </div>
                                </section>
                            </div>
                        </div>
                    }
                    @if (Model.Detail_ViSinhs.Count != 0)
                    {
                        <div class="tab-pane fade" id="visinh" role="tabpanel"
                             aria-labelledby="profile-tab">
                            <div class="page-heading">
                                <section class="section">
                                    <div class="card">
                                        @{
                                            Html.RenderAction("BillCheck", "Detail_ViSinh", new { multiplesModel = Model });
                                        }
                                    </div>
                                </section>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
}

@section scripts{
    <script>
        var selectHomeTown = document.querySelector("#Patient_HomeTown_ID");
        selectHomeTown.addEventListener('change', (e) => {
            var optionDistrict = document.querySelectorAll("#Patient_District_ID option");
            optionDistrict.forEach((value, index) => {
                value.remove();
            })
            $.ajax({
                url: "@Url.Action("filterDistricts", "Districts")",
                type: "POST",
                data: { id: e.target.value },
                success: (res) => {
                    var district = 0;
                    res.data.forEach((v, i) => {
                        if (i === 0) {
                            district = v.ID;
                        }
                        $("#Patient_District_ID").append(`<option value="${v.ID}">${v.District1}</option>`);
                    })
                    var optionWard = document.querySelectorAll("#Patient_Ward_ID option");
                    optionWard.forEach((value, index) => {
                        value.remove();
                    })
                    $.ajax({
                        url: "@Url.Action("filterWards", "Wards")",
                        type: "POST",
                        data: { id: district, homeTown: e.target.value },
                        success: (res) => {
                            res.data.forEach((v1, i1) => {
                                $("#Patient_Ward_ID").append(`<option value="${v1.ID}">${v1.Ward1}</option>`);
                            })
                        }
                    })
                }
            })
        })

        var selectDistrict = document.querySelector("#Patient_District_ID");
        selectDistrict.addEventListener('change', (e) => {
            var optionWard = document.querySelectorAll("#Patient_Ward_ID option");
            var homeTownSelect = document.querySelector('#Patient_HomeTown_ID').value;
            optionWard.forEach((value, index) => {
                value.remove();
            })
            $.ajax({
                url: "@Url.Action("filterWards", "Wards")",
                type: "POST",
                data: { id: e.target.value, homeTown: parseInt(homeTownSelect) },
                success: (res) => {
                    res.data.forEach((v, i) => {
                        $("#Patient_Ward_ID").append(`<option value="${v.ID}">${v.Ward1}</option>`);
                    })
                }
            })
        })

    </script>
    <script>
        var k = 1;
        loadMedication();
        function loadMedication() {
            var InfoID = document.querySelector('#InformationExamination_ID').getAttribute('value');
            var medication = document.getElementById('TableMedication');
            $.ajax({
                type: "POST",
                data: { id: InfoID },
                url: "@Url.Action("LoadPrescription", "Prescription_Detail")",
                success: (res) => {
                    $.each(res.data, function (index, medicationByID) {
                        var row = medication.insertRow(k);
                        var cell0 = row.insertCell(0);
                        var cell1 = row.insertCell(1);
                        var cell2 = row.insertCell(2);
                        cell0.innerHTML = "<input type='number' name='Prescription_Details" + '[' + (k - 1) + ']' + ".InformationExamination_ID' value='" + medicationByID.InformationExamination_ID + "' hidden/> <input type='number' name='Prescription_Details" + '[' + (k - 1) + ']' + ".Medication_ID' value='" + medicationByID.Medication_ID + "' hidden /> <input style='width:100%;border:none;pointer-events: none;' type='text' value='" + medicationByID.Name + "' readonly/>";
                        cell1.innerHTML = "<input style='width:100%;border:none;pointer-events: none;' type='number' name='Prescription_Details" + '[' + (k - 1) + ']' + ".NumMedication' value='" + medicationByID.NumMedication + "' readonly/>";
                        cell2.innerHTML = "<input style='width:100%;border:none;pointer-events: none;' type='text' name='Prescription_Details" + '[' + (k - 1) + ']' + ".Note' value='" + medicationByID.Note + "' readonly/>";
                        k++;
                    })
                }
            })
        }

        /*Print Bill Examination*/
        $('#PrintBillExamination').click(function () {
            var dataExam = $('#createTest').serialize();
            $.ajax({
                url: "@Url.Action("PrintBillExaminationPost", "Patients")",
                type: "POST",
                data: JSON.stringify({ multiplesModel: dataExam }).replaceAll('"}', ''),
                success: function (res) {
                    if (res.success) {
                        window.open("@Url.Action("PrintBillExamination", "Patients")", "_blank");
                    }
                }
            })
        })

        /*Print Bill Test Subclinical*/
        $('#PrintBillTestSubclinical').click(function () {
            var dataTestSubclinical = $('#createTest').serialize();
            $.ajax({
                url: "@Url.Action("PrintBillExaminationPost", "Patients")",
                type: "POST",
                data: JSON.stringify({ multiplesModel: dataTestSubclinical }).replaceAll('"}', ''),
                success: function (res) {
                    if (res.success) {
                        window.open("@Url.Action("PrintBillTestSubclinical", "Patients")", "_blank");
                    }
                }
            })
        })

        /*Print Bill Prescription*/
        $('#PrintBillPrescription').click(function () {
            var dataPrescription = $('#createTest').serialize();
            $.ajax({
                url: "@Url.Action("PrintBillExaminationPost", "Patients")",
                type: "POST",
                data: JSON.stringify({ multiplesModel: dataPrescription }).replaceAll('"}', ''),
                success: function (res) {
                    if (res.success) {
                        window.open("@Url.Action("PrintBillPrescription", "Patients")", "_blank");
                    }
                }
            })
        })

        /*Load CD Sinh hoa Mau*/
        function loadDetailTestsSHM() {
            $('#tableNewSinhHoaMau').DataTable({
                "ajax": {
                    "url": "@Url.Action("LoadDetailSHM", "MultipleModels")",
                    "type": "POST",
                    "data": function (d) {
                        d.arr = arrSinhHoaMau
                    }
                },
                "columns": [
                    {
                        "data": "ChiDinh",
                        "name": "Chỉ Định",
                        "render": (data, type, row) => {
                            var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='SinhHoaMau.ChiDinh' onchange='updateNewCountTests(" + row.ID + ',' + 1 + ',' + '"SHM-"' +")'>"
                            return checkbox;
                        },
                    },
                    {
                        "data": "NameTest",
                        "name": "Tên Xét Nghiệm",
                        "render": (data, type, row) => {
                            var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.NameTest + "</label>"
                            return label;
                        }
                    },
                    {
                        "data": "CSBT",
                        "name": "Chỉ Số Bình Thường"
                    },
                ],
                "language": {
                    "emptyTable": "No data available",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ danh mục xét nghiệm",
                    "search": "Tìm kiếm:",
                },
            })
        }
        /*Load CD Dich Choc Do*/
        function loadDetailAmniocentes() {
            $('#tableNewAmniocentes').DataTable({
                "ajax": {
                    "url": "@Url.Action("LoadDetailAmniocente", "MultipleModels")",
                    "type": "POST",
                    "data": function (d) {
                        d.arr = arrAmniocente
                    }
                },
                "columns": [
                    {
                        "data": "ChiDinh",
                        "name": "Chỉ Định",
                        "render": (data, type, row) => {
                            var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='Amniocente.ChiDinh' onchange='updateNewCountTests(" + row.ID + ',' + 6 + ',' + '"Amniocente-"' +")'>"
                            return checkbox;
                        },
                    },
                    {
                        "data": "NameTest",
                        "name": "Tên Xét Nghiệm",
                        "render": (data, type, row) => {
                            var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.NameTest + "</label>"
                            return label;
                        }
                    },
                    {
                        "data": "CSBT",
                        "name": "Chỉ Số Bình Thường"
                    },
                ],
                "language": {
                    "emptyTable": "No data available",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ danh mục xét nghiệm",
                    "search": "Tìm kiếm:",
                },
            })
        }
        /*Load CD Mien Dich*/
        function loadDetailTestsImmune() {
            $('#tableNewImmunes').DataTable({
                "ajax": {
                    "url": "@Url.Action("LoadDetailImmune", "MultipleModels")",
                    "type": "POST",
                    "data": function (d) {
                        d.arr = arrImmune
                    }
                },
                "columns": [
                    {
                        "data": "ChiDinh",
                        "name": "Chỉ Định",
                        "render": (data, type, row) => {
                            var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='Immune.ChiDinh' onchange='updateNewCountTests(" + row.ID + ',' + 5 + ',' + '"Immune-"' +")'>"
                            return checkbox;
                        },
                    },
                    {
                        "data": "NameTest",
                        "name": "Tên Xét Nghiệm",
                        "render": (data, type, row) => {
                            var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.NameTest + "</label>"
                            return label;
                        }
                    },
                    {
                        "data": "CSBT",
                        "name": "Chỉ Số Bình Thường"
                    },
                ],
                "language": {
                    "emptyTable": "No data available",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ danh mục xét nghiệm",
                    "search": "Tìm kiếm:",
                },
            })
        }
        /*Load CD Urines*/
        function loadDetailUrines() {
            $('#tableNewUrines').DataTable({
                "ajax": {
                    "url": "@Url.Action("LoadDetailUrines", "MultipleModels")",
                    "type": "POST",
                    "data": function (d) {
                        d.arr = arrUrine
                    }
                },
                "columns": [
                    {
                        "data": "ChiDinh",
                        "name": "Chỉ Định",
                        "render": (data, type, row) => {
                            var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='Urine.ChiDinh' onchange='updateNewCountTests(" + row.ID + ',' + 4 + ',' + '"Urine-"' +")'>"
                            return checkbox;
                        },
                    },
                    {
                        "data": "Name",
                        "name": "Tên Xét Nghiệm",
                        "render": (data, type, row) => {
                            var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label>"
                            return label;
                        }
                    },
                    {
                        "data": "CSBT",
                        "name": "Chỉ Số Bình Thường"
                    },
                ],
                "language": {
                    "emptyTable": "No data available",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ danh mục xét nghiệm",
                    "search": "Tìm kiếm:",
                },
            })
        }
        /*Load Detail Test*/
        function loadDetailTests() {
            $('#tableNewBloods').DataTable({
                    "ajax": {
                        "url": "@Url.Action("LoadDetailBloods", "MultipleModels")",
                        "type": "POST",
                        "data": function (d) {
                            d.arr = arrTests
                        }
                    },
                    "columns": [
                        {
                            "data": "ChiDinh",
                            "name": "Chỉ Định",
                            "render": (data, type, row) => {
                                var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='CTMau.ChiDinh' onchange='updateNewCountTests(" + row.ID + ',' + 0 + ',' + '"CTMau-"' +")'>"
                                return checkbox;
                            },
                        },
                        {
                            "data": "NameTest",
                            "name": "Tên Xét Nghiệm",
                            "render": (data, type, row) => {
                                var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.NameTest + "</label>"
                                return label;
                            }
                        },
                        {
                            "data": "CSBT",
                            "name": "Chỉ Số Bình Thường"
                        },
                        {
                            "data": "Unit",
                            "name": "Đơn Vị"
                        },
                        {
                            "data": "MayXN",
                            "name": "Máy XN"
                        }
                    ],
                    "language": {
                        "emptyTable": "No data available",
                        "oPaginate": {
                            sNext: '<i class="fa fa-chevron-right"></i>',
                            sPrevious: '<i class="fa fa-chevron-left"></i>',
                        },
                        "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                        "lengthMenu": "Hiển thị _MENU_ danh mục xét nghiệm",
                        "search": "Tìm kiếm:",
                    },
                })
        }
        /*Load Detail Test DM*/
        function loadDetailTestsDM() {
            $('#tableNewDM').DataTable({
                    "ajax": {
                        "url": "@Url.Action("LoadDetailDM", "MultipleModels")",
                        "type": "POST",
                        "data": function (d) {
                            d.arr = arrDongMau
                        }
                    },
                    "columns": [
                        {
                            "data": "ChiDinh",
                            "name": "Chỉ Định",
                            "render": (data, type, row) => {
                                var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='DongMau.ChiDinh' onchange='updateNewCountTests(" + row.ID + ',' + 2 + ',' + '"DongMau-"' +")'>"
                                return checkbox;
                            },
                        },
                        {
                            "data": "NameTest",
                            "name": "Tên Xét Nghiệm",
                            "render": (data, type, row) => {
                                var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.NameTest + "</label>"
                                return label;
                            }
                        },
                        {
                            "data": "CSBT",
                            "name": "Chỉ Số Bình Thường"
                        },
                        {
                            "data": "Unit",
                            "name": "Đơn Vị"
                        },
                    ],
                    "language": {
                        "emptyTable": "No data available",
                        "oPaginate": {
                            sNext: '<i class="fa fa-chevron-right"></i>',
                            sPrevious: '<i class="fa fa-chevron-left"></i>',
                        },
                        "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                        "lengthMenu": "Hiển thị _MENU_ danh mục xét nghiệm",
                        "search": "Tìm kiếm:",
                    },
                })
        }
        /*Load Detail Test Nhóm Máu*/
        function loadDetailTestsNM() {
            $('#tableNewNM').DataTable({
                    "ajax": {
                        "url": "@Url.Action("LoadDetailNM", "MultipleModels")",
                        "type": "POST",
                        "data": function (d) {
                            d.arr = arrNhomMau
                        }
                    },
                    "columns": [
                        {
                            "data": "ChiDinh",
                            "name": "Chỉ Định",
                            "render": (data, type, row) => {
                                var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='NhomMau.ChiDinh' onchange='updateNewCountTests(" + row.ID + ',' + 3 + ',' + '"NhomMau-"' +")'>"
                                return checkbox;
                            },
                        },
                        {
                            "data": "NameTest",
                            "name": "Tên Xét Nghiệm",
                            "render": (data, type, row) => {
                                var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.NameTest + "</label>"
                                return label;
                            }
                        }
                    ],
                    "language": {
                        "emptyTable": "No data available",
                        "oPaginate": {
                            sNext: '<i class="fa fa-chevron-right"></i>',
                            sPrevious: '<i class="fa fa-chevron-left"></i>',
                        },
                        "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                        "lengthMenu": "Hiển thị _MENU_ danh mục xét nghiệm",
                        "search": "Tìm kiếm:",
                    },
                })
        }
        /*Load Detail Test ViSinh*/
        function loadDetailTestsViSinh() {
            $('#tableNewViSinhs').DataTable({
                    "ajax": {
                        "url": "@Url.Action("LoadDetailVS", "MultipleModels")",
                        "type": "POST",
                        "data": function (d) {
                            d.arr = arrViSinh
                        }
                    },
                    "columns": [
                        {
                            "data": "ChiDinh",
                            "name": "Chỉ Định",
                            "render": (data, type, row) => {
                                var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='ViSinh.ChiDinh' onchange='updateNewCountTests(" + row.ID + ',' + 7 + ',' + '"ViSinh-"' +")'>"
                                return checkbox;
                            },
                        },
                        {
                            "data": "NameTest",
                            "name": "Tên Xét Nghiệm",
                            "render": (data, type, row) => {
                                var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.NameTest + "</label>"
                                return label;
                            }
                        }
                    ],
                    "language": {
                        "emptyTable": "No data available",
                        "oPaginate": {
                            sNext: '<i class="fa fa-chevron-right"></i>',
                            sPrevious: '<i class="fa fa-chevron-left"></i>',
                        },
                        "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                        "lengthMenu": "Hiển thị _MENU_ danh mục xét nghiệm",
                        "search": "Tìm kiếm:",
                    },
                })
        }

        /*Ông/Bà*/
        $(document).ready(function () {
            $('#tableHistoryDiseases1').dataTable({
                "language": {
                    "emptyTable": "No data available, please click on <b>Loading...</b> button",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ tiền sử bệnh",
                    "search": "Tìm kiếm:",
                },
            });
        });

        /*Cha/Mẹ*/
        $(document).ready(function () {
            $('#tableHistoryDiseases2').dataTable({
                "language": {
                    "emptyTable": "No data available, please click on <b>Loading...</b> button",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ tiền sử bệnh",
                    "search": "Tìm kiếm:",
                },
            });
        });

        /*Anh/Chị em*/
        $(document).ready(function () {
            $('#tableHistoryDiseases3').dataTable({
                "language": {
                    "emptyTable": "No data available, please click on <b>Loading...</b> button",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ tiền sử bệnh",
                    "search": "Tìm kiếm:",
                },
            });
        });

        $(document).ready(function () {
            $('#tableMedicalHistories').dataTable({
                "language": {
                    "emptyTable": "No data available, please click on <b>Loading...</b> button",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ bệnh sử",
                    "search": "Tìm kiếm:",
                },
            });
        });

        var listTable = $('*.tableLoad');
        listTable.each((index, table) => {
            $('#' + table.id).DataTable({
                "pageLength": 50,
                "language": {
                    "emptyTable": "No data available",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ danh mục xét nghiệm",
                    "search": "Tìm kiếm:",
                },
            });
        })

        var listTableClinical = $('*.tableLoadClinical');
        listTableClinical.each((index, table) => {
            $('#' + table.id).DataTable({
                "pageLength": 10,
                "language": {
                    "emptyTable": "No data available",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ danh mục bệnh",
                    "search": "Tìm kiếm:",
                },
            });
        })

        if (window.location.href.indexOf("Admin/MultipleModels") > -1) {
            $('a[href="/CP24Team08/Admin/Patients"]').parent().addClass("active");
        }
    </script>
}