@model ElectronicMedicalRecords.Models.MultiplesModel
@{
    Layout = "~/Areas/Admin/Views/Shared/_LayoutMultipleModel.cshtml";
}
<style>
    .card-header hr {
        color: #009688;
    }

    .patient-taginpust .bootstrap-tagsinput {
        width: 100%;
        padding: 0.375rem 0.75rem;
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        color: #607080;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #dce7f1;
        -webkit-appearance: none;
        -moz-appearance: none;
        border-radius: 0.25rem;
        transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
        box-shadow: unset
    }

        .patient-taginpust .bootstrap-tagsinput .label-info {
            background-color: #435ebe;
            border-radius: 4px;
            padding: 4px
        }

    .table-bordered tr:first-child {
        background-color: #435ebe;
        color: #fff;
        padding: 5px 0;
        text-align: center
    }

    .table-bordered tr:nth-child(2) td {
        border-width: 1px;
    }

    .table-bordered td {
        border-width: 1px
    }

    .pd-0px {
        padding: 0 1rem;
    }

    .navbar-nav {
        display: none
    }

    body {
        background-color: #f5f5f5;
    }

    .imagePreview {
        width: 100%;
        height: 250px;
        background-position: center center;
        background: url(http://cliquecities.com/assets/no-image-e3699ae23f866f6cbdf8ba2443ee5c4e.jpg);
        background-color: #fff;
        background-size: cover;
        background-repeat: no-repeat;
        display: inline-block;
        box-shadow: 0px -3px 6px 2px rgba(0,0,0,0.2);
    }

    .imgUp {
        position: relative;
        margin-bottom: 15px;
    }

    .del {
        position: absolute;
        top: 0px;
        right: 15px;
        width: 30px;
        height: 30px;
        text-align: center;
        line-height: 30px;
        background-color: rgba(255,255,255,0.6);
        cursor: pointer;
    }

    .imgAdd {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background-color: #4bd7ef;
        color: #fff;
        box-shadow: 0px 0px 2px 1px rgba(0,0,0,0.2);
        text-align: center;
        line-height: 30px;
        margin-top: 0px;
        cursor: pointer;
        font-size: 15px;
        padding: 0;
    }

    .choices[data-type*=select-one].is-open:after {
        margin-top: -10px;
    }

    label.invalidForm {
        color: red;
        font-size: 13px
    }
</style>
<header class="mb-3">
    <a href="#" class="burger-btn d-block d-xl-none">
        <i class="bi bi-justify fs-3"></i>
    </a>
</header>
@using (Html.BeginForm("Edit1", "MultipleModels", FormMethod.Post, new { enctype = "multipart/form-data", id = "FormEdit" }))
{
    @Html.AntiForgeryToken()
    <div class="col-md-12">
        <div class="card">
            <div class="card-body">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <a class="nav-link active" id="home-tab" data-bs-toggle="tab" href="#home"
                           role="tab" aria-controls="home" aria-selected="true">Hồ Sơ</a>
                    </li>
                    @if (Model.Detail_HistoryDiseases1.Count != 0 || Model.Detail_HistoryDiseases2.Count != 0 || Model.Detail_HistoryDiseases3.Count != 0
                        || Model.Detail_MedicalHistories.Count != 0)
                    {
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="history-tab" data-bs-toggle="tab" href="#history"
                               role="tab" aria-controls="history" aria-selected="true">Tiền Sử, Bệnh Sử</a>
                        </li>
                    }
                    @if (User.IsInRole("Bác Sĩ") || User.IsInRole("Giám Đốc") || User.IsInRole("QTV") || User.IsInRole("Kỹ Thuật Viên"))
                    {
                        if (Model.Detail_TuanHoans.Count != 0 || Model.Detail_HoHaps.Count != 0 || Model.Detail_TieuHoas.Count != 0 || Model.Detail_ThanTietNieus.Count != 0
                        || Model.Detail_CoXuongKhops.Count != 0 || Model.Detail_ThanKinhs.Count != 0 || Model.Detail_TamThans.Count != 0 || Model.Detail_NgoaiKhoas.Count != 0
                        || Model.Detail_SanPhuKhoas.Count != 0 || Model.Detail_Mats.Count != 0 || Model.Detail_TaiMuiHongs.Count != 0 || Model.Detail_RangHamMats.Count != 0 
                        || Model.Detail_DaLieus.Count != 0 || Model.Clinical != null)
                        {
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="home-tab" data-bs-toggle="tab" href="#LamSang"
                                   role="tab" aria-controls="home" aria-selected="true">Lâm Sàng</a>
                            </li>
                        }
                    }
                    @if (User.IsInRole("Giám Đốc") || User.IsInRole("Kỹ Thuật Viên") || User.IsInRole("QTV"))
                    {
                        if (Model.Detail_CTMaus.Count != 0)
                        {
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#profile"
                                   role="tab" aria-controls="profile" aria-selected="false">Công Thức Máu</a>
                            </li>
                        }
                        if (Model.Detail_SinhHoaMaus.Count != 0)
                        {
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#SinhHoaMau"
                                   role="tab" aria-controls="profile" aria-selected="false">Sinh Hóa Máu</a>
                            </li>
                        }
                        if (Model.Detail_DongMaus.Count != 0)
                        {
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#DongMau"
                                   role="tab" aria-controls="profile" aria-selected="false">Đông Máu</a>
                            </li>
                        }
                        if (Model.Detail_NhomMaus.Count != 0)
                        {
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#NhomMau"
                                   role="tab" aria-controls="profile" aria-selected="false">Nhóm Máu</a>
                            </li>
                        }
                        if (Model.Detail_Urines.Count != 0)
                        {
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#urine"
                                   role="tab" aria-controls="profile" aria-selected="false">Nước Tiểu</a>
                            </li>
                        }
                        if (Model.Detail_Immunes.Count != 0)
                        {
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#immune"
                                   role="tab" aria-controls="profile" aria-selected="false">Miễn Dịch</a>
                            </li>
                        }
                        if (Model.Detail_Amniocentes.Count != 0)
                        {
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="profile-tab" data-bs-toggle="tab" href="#amniocente"
                                   role="tab" aria-controls="profile" aria-selected="false">Dịch Chọc Dò</a>
                            </li>
                        }
                        if (Model.Detail_ViSinhs.Count != 0)
                        {
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="contact-tab" data-bs-toggle="tab" href="#visinh"
                                   role="tab" aria-controls="contact" aria-selected="false">Vi Sinh</a>
                            </li>
                        }
                    }
                </ul>
                <div class="ms-4 col-12 d-flex justify-content-start pt-4">
                    <button type="submit"
                            class="btn btn-primary me-1 mb-1">
                        Cập Nhât Hồ Sơ
                    </button>
                    <button type="reset"
                            class="btn btn-light-secondary me-1 mb-1">
                        Reset
                    </button>
                </div>
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="home" role="tabpanel"
                         aria-labelledby="home-tab">
                        <p class='my-2'>
                            <section id="multiple-column-form">
                                <div class="row match-height">
                                    <div class="col-12">
                                        <div class="card">
                                            @{
                                                Html.RenderAction("Edit", "Patients", new { multiplesModel = Model });
                                                if (User.IsInRole("Bác Sĩ") || User.IsInRole("Giám Đốc") || User.IsInRole("Kỹ Thuật Viên") || User.IsInRole("QTV"))
                                                {
                                                    Html.RenderAction("Edit", "InformationExaminations", new { multiplesModel = Model });
                                                    Html.RenderAction("DetailIERead", "Prescription_Detail", new { multiplesModel = Model });
                                                }
                                            }
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </p>
                    </div>
                    <div class="tab-pane fade show" id="history" role="tabpanel"
                         aria-labelledby="home-tab">
                        <p class='my-2'>
                            <section id="multiple-column-form">
                                <div class="row match-height">
                                    <div class="col-12">
                                        <div class="card">
                                            @{
                                                if (Model.Detail_HistoryDiseases1.Count != 0 || Model.Detail_HistoryDiseases2.Count != 0 || Model.Detail_HistoryDiseases3.Count != 0)
                                                {
                                                    Html.RenderAction("BillCheck", "Detail_HistoryDisease", new { multiplesModel = Model });
                                                }
                                                if (Model.Detail_MedicalHistories.Count != 0)
                                                {
                                                    Html.RenderAction("BillCheck", "Detail_MedicalHistory", new { multiplesModel = Model });
                                                }
                                            }
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </p>
                    </div>
                    @if (User.IsInRole("Bác Sĩ") || User.IsInRole("Giám Đốc") || User.IsInRole("QTV") || User.IsInRole("Kỹ Thuật Viên"))
                    {
                        <div class="tab-pane fade" id="LamSang" role="tabpanel"
                             aria-labelledby="profile-tab">
                            <div class="page-heading">
                                <section class="section">
                                    <div class="card">
                                        <ul class="nav nav-tabs" id="mySubTab" role="tablist">
                                            @if (Model.Detail_TuanHoans.Count != 0 || Model.Detail_HoHaps.Count != 0 || Model.Detail_TieuHoas.Count != 0 || Model.Detail_ThanTietNieus.Count != 0
                                                    || Model.Detail_CoXuongKhops.Count != 0 || Model.Detail_ThanKinhs.Count != 0 || Model.Detail_TamThans.Count != 0)
                                            {
                                                <li class="nav-item" role="presentation">
                                                    <a class="nav-link active" id="NoiKhoa-tab" data-bs-toggle="tab" href="#NoiKhoa"
                                                       role="tab" aria-controls="home" aria-selected="true">Nội Khoa</a>
                                                </li>
                                            }
                                            @if (Model.Detail_NgoaiKhoas.Count != 0)
                                            {
                                                <li class="nav-item" role="presentation">
                                                    <a class="nav-link" id="NgoaiKhoa-tab" data-bs-toggle="tab" href="#NgoaiKhoa"
                                                       role="tab" aria-controls="history" aria-selected="true">Ngoại Khoa</a>
                                                </li>
                                            }
                                            @if (Model.Detail_SanPhuKhoas.Count != 0)
                                            {
                                                <li class="nav-item" role="presentation">
                                                    <a class="nav-link" id="SanPhuKhoa-tab" data-bs-toggle="tab" href="#SanPhuKhoa"
                                                       role="tab" aria-controls="home" aria-selected="true">Sản Phụ Khoa</a>
                                                </li>
                                            }
                                            @if (Model.Detail_Mats.Count != 0 || Model.Clinical.LeftEyesGlasses != null || Model.Clinical.LeftEyesNoGlasses != null
                                            || Model.Clinical.RightEyesGlasses != null || Model.Clinical.RightEyesNoGlasses != null)
                                            {
                                                <li class="nav-item" role="presentation">
                                                    <a class="nav-link" id="Mat-tab" data-bs-toggle="tab" href="#Mat"
                                                       role="tab" aria-controls="home" aria-selected="true">Mắt</a>
                                                </li>
                                            }
                                            @if (Model.Detail_TaiMuiHongs.Count != 0 || Model.Clinical.LeftEarSay != null || Model.Clinical.LeftEarWhisper != null
                                            || Model.Clinical.RightEarSay != null || Model.Clinical.RightEarWhisper != null)
                                            {
                                                <li class="nav-item" role="presentation">
                                                    <a class="nav-link" id="TaiMuiHong-tab" data-bs-toggle="tab" href="#TaiMuiHong"
                                                       role="tab" aria-controls="home" aria-selected="true">Tai-Mũi-Họng</a>
                                                </li>
                                            }
                                            @if (Model.Detail_RangHamMats.Count != 0 || Model.Clinical.LowerJaw != null || Model.Clinical.UpperJaw != null)
                                            {
                                                <li class="nav-item" role="presentation">
                                                    <a class="nav-link" id="RangHamMat-tab" data-bs-toggle="tab" href="#RangHamMat"
                                                       role="tab" aria-controls="home" aria-selected="true">Răng-Hàm-Mặt</a>
                                                </li>
                                            }
                                            @if (Model.Detail_DaLieus.Count != 0)
                                            {
                                                <li class="nav-item" role="presentation">
                                                    <a class="nav-link" id="DaLieu-tab" data-bs-toggle="tab" href="#DaLieu"
                                                       role="tab" aria-controls="home" aria-selected="true">Da Liễu</a>
                                                </li>
                                            }

                                        </ul>
                                        <div class="tab-content" id="myTabContent">
                                            @if (Model.Detail_TuanHoans.Count != 0 || Model.Detail_HoHaps.Count != 0 || Model.Detail_TieuHoas.Count != 0 || Model.Detail_ThanTietNieus.Count != 0
                                                        || Model.Detail_CoXuongKhops.Count != 0 || Model.Detail_ThanKinhs.Count != 0 || Model.Detail_TamThans.Count != 0)
                                            {
                                                <div class="tab-pane fade show active" id="NoiKhoa" role="tabpanel"
                                                     aria-labelledby="home-tab">
                                                    <p class='my-2'>
                                                        <section id="multiple-column-form">
                                                            <div class="row match-height">
                                                                <div class="col-12">
                                                                    <div class="card">
                                                                        @{
                                                                            if (Model.Detail_TuanHoans.Count != 0)
                                                                            {
                                                                                Html.RenderAction("BillCheck", "Detail_TuanHoan", new { multiplesModel = Model });
                                                                                <br />
                                                                            }
                                                                            if (Model.Detail_HoHaps.Count != 0)
                                                                            {
                                                                                Html.RenderAction("BillCheck", "Detail_HoHap", new { multiplesModel = Model });
                                                                                <br />
                                                                            }
                                                                            if (Model.Detail_TieuHoas.Count != 0)
                                                                            {
                                                                                Html.RenderAction("BillCheck", "Detail_TieuHoa", new { multiplesModel = Model });
                                                                                <br />
                                                                            }
                                                                            if (Model.Detail_ThanTietNieus.Count != 0)
                                                                            {
                                                                                Html.RenderAction("BillCheck", "Detail_ThanTietNieu", new { multiplesModel = Model });
                                                                                <br />
                                                                            }
                                                                            if (Model.Detail_CoXuongKhops.Count != 0)
                                                                            {
                                                                                Html.RenderAction("BillCheck", "Detail_CoXuongKhop", new { multiplesModel = Model });
                                                                                <br />
                                                                            }
                                                                            if (Model.Detail_ThanKinhs.Count != 0)
                                                                            {
                                                                                Html.RenderAction("BillCheck", "Detail_ThanKinh", new { multiplesModel = Model });
                                                                                <br />
                                                                            }
                                                                            if (Model.Detail_TamThans.Count != 0)
                                                                            {
                                                                                Html.RenderAction("BillCheck", "Detail_TamThan", new { multiplesModel = Model });
                                                                            }
                                                                        }
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </section>
                                                    </p>
                                                </div>
                                            }
                                            <div class="tab-pane fade" id="NgoaiKhoa" role="tabpanel"
                                                 aria-labelledby="home-tab">
                                                <p class='my-2'>
                                                    <section id="multiple-column-form">
                                                        <div class="row match-height">
                                                            <div class="col-12">
                                                                <div class="card">
                                                                    @{
                                                                        if (Model.Detail_NgoaiKhoas.Count != 0)
                                                                        {
                                                                            Html.RenderAction("BillCheck", "Detail_NgoaiKhoa", new { multiplesModel = Model });
                                                                        }
                                                                    }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </section>
                                                </p>
                                            </div>

                                            <div class="tab-pane fade" id="SanPhuKhoa" role="tabpanel"
                                                 aria-labelledby="home-tab">
                                                <p class='my-2'>
                                                    <section id="multiple-column-form">
                                                        <div class="row match-height">
                                                            <div class="col-12">
                                                                <div class="card">
                                                                    @{
                                                                        if (Model.Detail_SanPhuKhoas.Count != 0)
                                                                        {
                                                                            Html.RenderAction("BillCheck", "Detail_SanPhuKhoa", new { multiplesModel = Model });
                                                                        }
                                                                    }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </section>
                                                </p>
                                            </div>

                                            <div class="tab-pane fade" id="Mat" role="tabpanel"
                                                 aria-labelledby="home-tab">
                                                <p class='my-2'>
                                                    <section id="multiple-column-form">
                                                        <div class="row match-height">
                                                            <div class="col-12">
                                                                <div class="card">
                                                                    @{
                                                                        if (Model.Detail_Mats.Count != 0 || Model.Clinical.LeftEyesGlasses != null || Model.Clinical.LeftEyesNoGlasses != null
                                                                        || Model.Clinical.RightEyesGlasses != null || Model.Clinical.RightEyesNoGlasses != null)
                                                                        {
                                                                            Html.RenderAction("BillCheck", "Detail_Mat", new { multiplesModel = Model });
                                                                        }
                                                                    }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </section>
                                                </p>
                                            </div>

                                            <div class="tab-pane fade" id="TaiMuiHong" role="tabpanel"
                                                 aria-labelledby="home-tab">
                                                <p class='my-2'>
                                                    <section id="multiple-column-form">
                                                        <div class="row match-height">
                                                            <div class="col-12">
                                                                <div class="card">
                                                                    @{
                                                                        if (Model.Detail_TaiMuiHongs.Count != 0 || Model.Clinical.LeftEarSay != null || Model.Clinical.LeftEarWhisper != null
                                                                        || Model.Clinical.RightEarSay != null || Model.Clinical.RightEarWhisper != null)
                                                                        {
                                                                            Html.RenderAction("BillCheck", "Detail_TaiMuiHong", new { multiplesModel = Model });
                                                                        }
                                                                    }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </section>
                                                </p>
                                            </div>

                                            <div class="tab-pane fade" id="RangHamMat" role="tabpanel"
                                                 aria-labelledby="home-tab">
                                                <p class='my-2'>
                                                    <section id="multiple-column-form">
                                                        <div class="row match-height">
                                                            <div class="col-12">
                                                                <div class="card">
                                                                    @{
                                                                        if (Model.Detail_RangHamMats.Count != 0 || Model.Clinical.LowerJaw != null || Model.Clinical.UpperJaw != null)
                                                                        {
                                                                            Html.RenderAction("BillCheck", "Detail_RangHamMat", new { multiplesModel = Model });
                                                                        }
                                                                    }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </section>
                                                </p>
                                            </div>

                                            <div class="tab-pane fade" id="DaLieu" role="tabpanel"
                                                 aria-labelledby="home-tab">
                                                <p class='my-2'>
                                                    <section id="multiple-column-form">
                                                        <div class="row match-height">
                                                            <div class="col-12">
                                                                <div class="card">
                                                                    @{
                                                                        if (Model.Detail_DaLieus.Count != 0)
                                                                        {
                                                                            Html.RenderAction("BillCheck", "Detail_DaLieu", new { multiplesModel = Model });
                                                                        }
                                                                    }
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </section>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>
                        </div>
                    }
                    @if (User.IsInRole("Giám Đốc") || User.IsInRole("Kỹ Thuật Viên") || User.IsInRole("QTV"))
                    {
                        if (Model.Detail_CTMaus.Count != 0)
                        {
                            <div class="tab-pane fade" id="profile" role="tabpanel"
                                 aria-labelledby="profile-tab">
                                <div class="page-heading">
                                    <section class="section">
                                        <div class="card">
                                            @{
                                                Html.RenderAction("DetailIE", "Detail_CTMau", new { multiplesModel = Model });
                                            }
                                        </div>
                                    </section>
                                </div>
                            </div>
                        }
                        if (Model.Detail_SinhHoaMaus.Count != 0)
                        {
                            <div class="tab-pane fade" id="SinhHoaMau" role="tabpanel"
                                 aria-labelledby="profile-tab">
                                <div class="page-heading">
                                    <section class="section">
                                        <div class="card">
                                            @{
                                                Html.RenderAction("DetailIE", "Detail_SinhHoaMau", new { multiplesModel = Model });
                                            }
                                        </div>
                                    </section>
                                </div>
                            </div>
                        }
                        if (Model.Detail_DongMaus.Count != 0)
                        {
                            <div class="tab-pane fade" id="DongMau" role="tabpanel"
                                 aria-labelledby="profile-tab">
                                <div class="page-heading">
                                    <section class="section">
                                        <div class="card">
                                            @{
                                                Html.RenderAction("DetailIE", "Detail_DongMau", new { multiplesModel = Model });
                                            }
                                        </div>
                                    </section>
                                </div>
                            </div>
                        }
                        if (Model.Detail_NhomMaus.Count != 0)
                        {
                            <div class="tab-pane fade" id="NhomMau" role="tabpanel"
                                 aria-labelledby="profile-tab">
                                <div class="page-heading">
                                    <section class="section">
                                        <div class="card">
                                            @{
                                                Html.RenderAction("DetailIE", "Detail_NhomMau", new { multiplesModel = Model });
                                            }
                                        </div>
                                    </section>
                                </div>
                            </div>
                        }
                        if (Model.Detail_Urines.Count != 0)
                        {
                            <div class="tab-pane fade" id="urine" role="tabpanel"
                                 aria-labelledby="profile-tab">
                                <div class="page-heading">
                                    <section class="section">
                                        <div class="card">
                                            @{
                                                Html.RenderAction("DetailIE", "Detail_Urine", new { multiplesModel = Model });
                                            }
                                        </div>
                                    </section>
                                </div>
                            </div>
                        }
                        if (Model.Detail_Immunes.Count != 0)
                        {
                            <div class="tab-pane fade" id="immune" role="tabpanel"
                                 aria-labelledby="profile-tab">
                                <div class="page-heading">
                                    <section class="section">
                                        <div class="card">
                                            @{
                                                Html.RenderAction("DetailIE", "Detail_Immune", new { multiplesModel = Model });
                                            }
                                        </div>
                                    </section>
                                </div>
                            </div>
                        }
                        if (Model.Detail_Amniocentes.Count != 0)
                        {
                            <div class="tab-pane fade" id="amniocente" role="tabpanel"
                                 aria-labelledby="profile-tab">
                                <div class="page-heading">
                                    <section class="section">
                                        <div class="card">
                                            @{
                                                Html.RenderAction("DetailIE", "Detail_Amniocente", new { multiplesModel = Model });
                                            }
                                        </div>
                                    </section>
                                </div>
                            </div>
                        }
                        if (Model.Detail_ViSinhs.Count != 0)
                        {
                            <div class="tab-pane fade" id="visinh" role="tabpanel"
                                 aria-labelledby="profile-tab">
                                <div class="page-heading">
                                    <section class="section">
                                        <div class="card">
                                            @{
                                                Html.RenderAction("DetailIE", "Detail_ViSinh", new { multiplesModel = Model });
                                            }
                                        </div>
                                    </section>
                                </div>
                            </div>
                        }
                    }
                </div>
            </div>
        </div>
    </div>
}
@section scripts{
    <script>
        var selectHomeTown = document.querySelector("#Patient_HomeTown_ID");
        selectHomeTown.addEventListener('change', (e) => {
            var optionDistrict = document.querySelectorAll("#Patient_District_ID option");
            optionDistrict.forEach((value, index) => {
                value.remove();
            })
            $.ajax({
                url: "@Url.Action("filterDistricts", "Districts")",
                type: "POST",
                data: { id: e.target.value },
                success: (res) => {
                    var district = 0;
                    res.data.forEach((v, i) => {
                        if (i === 0) {
                            district = v.ID;
                        }
                        $("#Patient_District_ID").append(`<option value="${v.ID}">${v.District1}</option>`);
                    })
                    var optionWard = document.querySelectorAll("#Patient_Ward_ID option");
                    optionWard.forEach((value, index) => {
                        value.remove();
                    })
                    $.ajax({
                        url: "@Url.Action("filterWards", "Wards")",
                        type: "POST",
                        data: { id: district, homeTown: e.target.value },
                        success: (res) => {
                            res.data.forEach((v1, i1) => {
                                $("#Patient_Ward_ID").append(`<option value="${v1.ID}">${v1.Ward1}</option>`);
                            })
                        }
                    })
                }
            })
        })

        var selectDistrict = document.querySelector("#Patient_District_ID");
        selectDistrict.addEventListener('change', (e) => {
            var optionWard = document.querySelectorAll("#Patient_Ward_ID option");
            var homeTownSelect = document.querySelector('#Patient_HomeTown_ID').value;
            optionWard.forEach((value, index) => {
                value.remove();
            })
            $.ajax({
                url: "@Url.Action("filterWards", "Wards")",
                type: "POST",
                data: { id: e.target.value, homeTown: parseInt(homeTownSelect) },
                success: (res) => {
                    res.data.forEach((v, i) => {
                        $("#Patient_Ward_ID").append(`<option value="${v.ID}">${v.Ward1}</option>`);
                    })
                }
            })
        })
    </script>
    <script>
        var listTable = $('*.tableLoad');
        listTable.each((index, table) => {
            $('#' + table.id).DataTable({
                "pageLength": 50,
                "language": {
                    "emptyTable": "No data available",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ danh mục xét nghiệm",
                    "search": "Tìm kiếm:",
                },
            });
        })


        /*Clinical*/
        var CountClinicals = $('*.countClinicals');
        var DetailClinicals = $('*#DetailClinicalCount');
        var countEachClinical = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        var arrTuanHoan = [];
        var arrHoHap = [];
        var arrTieuHoa = [];
        var arrThanTietNieu = [];
        var arrCoXuongKhop = [];
        var arrThanKinh = [];
        var arrTamThan = [];
        var arrNgoaiKhoa = [];
        var arrSanPhuKhoa = [];
        var arrMat = [];
        var arrTaiMuiHong = [];
        var arrRangHamMat = [];
        var arrDaLieu = [];

        getArrTuanHoan();
        function getArrTuanHoan() {
            $.ajax({
                url: "@Url.Action("GetArrTuanHoan", "TuanHoans")",
                type: "POST",
                data: { id: @Model.InformationExamination.ID },
                success: (res) => {
                    arrTuanHoan = res.res;
                    countEachClinical[0] = res.res.length;
                    if (countEachClinical[0] > 0) {
                        DetailClinicals[0].style.display = "block";
                    } else {
                        DetailClinicals[0].style.display = "none"
                    }
                    CountClinicals[0].innerHTML = countEachClinical[0];
                }
            })
        }

        /*Load Detail Test Tuần Hoàn*/
        function loadDetailTuanHoans() {
            $('#tableNewTuanHoans').DataTable().destroy();
            $('#tableNewTuanHoans').DataTable({
                "ajax": {
                    "url": "@Url.Action("LoadDetailTuanHoan", "MultipleModels")",
                    "type": "POST",
                    "data": function (d) {
                        d.arr = arrTuanHoan
                    }
                },
                "columns": [
                    {
                        "data": "ChiDinh",
                        "name": "#",
                        "render": (data, type, row) => {
                            var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='TuanHoan.ChiDinh' onchange='updateNewCountClinicals(" + row.ID + ',' + 0 + ',' + '"TuanHoan-"' +")'>"
                            return checkbox;
                        },
                    },
                    {
                        "data": "Name",
                        "name": "Bệnh Tuần Hoàn",
                        "render": (data, type, row) => {
                            if (row.Dangerous == false) {
                                var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label>"
                            } else {
                                var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label><span style='color: red'> *</span>"
                            }
                            return label;
                        }
                    }
                ],
                "language": {
                    "emptyTable": "No data available",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ danh mục tuần hoàn",
                    "search": "Tìm kiếm:",
                },
            })
        }

        getArrHoHap();
        function getArrHoHap() {
            $.ajax({
                url: "@Url.Action("GetArrHoHap", "HoHaps")",
                type: "POST",
                data: { id: @Model.InformationExamination.ID },
                success: (res) => {
                    arrHoHap = res.res;
                    countEachClinical[1] = res.res.length;
                    if (countEachClinical[1] > 0) {
                        DetailClinicals[1].style.display = "block";
                    } else {
                        DetailClinicals[1].style.display = "none"
                    }
                    CountClinicals[1].innerHTML = countEachClinical[1];
                }
            })
        }

        /*Load Detail Test Hô Hấp*/
        function loadDetailHoHaps() {
            $('#tableNewHoHaps').DataTable().destroy();
            $('#tableNewHoHaps').DataTable({
                "ajax": {
                    "url": "@Url.Action("LoadDetailHoHap", "MultipleModels")",
                    "type": "POST",
                    "data": function (d) {
                        d.arr = arrHoHap
                    }
                },
                "columns": [
                    {
                        "data": "ChiDinh",
                        "name": "#",
                        "render": (data, type, row) => {
                            var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='HoHap.ChiDinh' onchange='updateNewCountClinicals(" + row.ID + ',' + 1 + ',' + '"HoHap-"' +")'>"
                            return checkbox;
                        },
                    },
                    {
                        "data": "Name",
                        "name": "Bệnh Hô Hấp",
                        "render": (data, type, row) => {
                            if (row.Dangerous == false) {
                                var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label>"
                            } else {
                                var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label><span style='color: red'> *</span>"
                            }
                            return label;
                        }
                    }
                ],
                "language": {
                    "emptyTable": "No data available",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ danh mục hô hấp",
                    "search": "Tìm kiếm:",
                },
            })
        }

        getArrTieuHoa();
        function getArrTieuHoa() {
            $.ajax({
                url: "@Url.Action("GetArrTieuHoa", "TieuHoas")",
                type: "POST",
                data: { id: @Model.InformationExamination.ID },
                success: (res) => {
                    arrTieuHoa = res.res;
                    countEachClinical[2] = res.res.length;
                    if (countEachClinical[2] > 0) {
                        DetailClinicals[2].style.display = "block";
                    } else {
                        DetailClinicals[2].style.display = "none"
                    }
                    CountClinicals[2].innerHTML = countEachClinical[2];
                }
            })
        }

                /*Load Detail Test Tiêu Hóa*/
        function loadDetailTieuHoas() {
            $('#tableNewTieuHoas').DataTable().destroy();
            $('#tableNewTieuHoas').DataTable({
                "ajax": {
                    "url": "@Url.Action("LoadDetailTieuHoa", "MultipleModels")",
                    "type": "POST",
                    "data": function (d) {
                        d.arr = arrTieuHoa
                    }
                },
                "columns": [
                    {
                        "data": "ChiDinh",
                        "name": "#",
                        "render": (data, type, row) => {
                            var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='TieuHoa.ChiDinh' onchange='updateNewCountClinicals(" + row.ID + ',' + 2 + ',' + '"TieuHoa-"' +")'>"
                            return checkbox;
                        },
                    },
                    {
                        "data": "Name",
                        "name": "Bệnh Tiêu Hóa",
                        "render": (data, type, row) => {
                            if (row.Dangerous == false) {
                                var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label>"
                            } else {
                                var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label><span style='color: red'> *</span>"
                            }
                            return label;
                        }
                    }
                ],
                "language": {
                    "emptyTable": "No data available",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ danh mục tiêu hóa",
                    "search": "Tìm kiếm:",
                },
            })
        }

        getArrThanTietNieu();
        function getArrThanTietNieu() {
            $.ajax({
                url: "@Url.Action("GetArrThanTietNieu", "ThanTietNieux")",
                type: "POST",
                data: { id: @Model.InformationExamination.ID },
                success: (res) => {
                    arrThanTietNieu = res.res;
                    countEachClinical[3] = res.res.length;
                    if (countEachClinical[3] > 0) {
                        DetailClinicals[3].style.display = "block";
                    } else {
                        DetailClinicals[3].style.display = "none"
                    }
                    CountClinicals[3].innerHTML = countEachClinical[3];
                }
            })
        }

                /*Load Detail Test Thận Tiết Niệu*/
        function loadDetailThanTietNieus() {
            $('#tableNewThanTietNieus').DataTable().destroy();
            $('#tableNewThanTietNieus').DataTable({
                    "ajax": {
                        "url": "@Url.Action("LoadDetailThanTietNieu", "MultipleModels")",
                        "type": "POST",
                        "data": function (d) {
                            d.arr = arrThanTietNieu
                        }
                    },
                    "columns": [
                        {
                            "data": "ChiDinh",
                            "name": "#",
                            "render": (data, type, row) => {
                                var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='ThanTietNieu.ChiDinh' onchange='updateNewCountClinicals(" + row.ID + ',' + 3 + ',' + '"ThanTietNieu-"' +")'>"
                                return checkbox;
                            },
                        },
                        {
                            "data": "Name",
                            "name": "Bệnh Thận Tiết Niệu",
                            "render": (data, type, row) => {
                                if (row.Dangerous == false) {
                                    var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label>"
                                } else {
                                    var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label><span style='color: red'> *</span>"
                                }
                                return label;
                            }
                        }
                    ],
                    "language": {
                        "emptyTable": "No data available",
                        "oPaginate": {
                            sNext: '<i class="fa fa-chevron-right"></i>',
                            sPrevious: '<i class="fa fa-chevron-left"></i>',
                        },
                        "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                        "lengthMenu": "Hiển thị _MENU_ danh mục thận tiết niệu",
                        "search": "Tìm kiếm:",
                    },
                })
        }

        getArrCoXuongKhop();
        function getArrCoXuongKhop() {
            $.ajax({
                url: "@Url.Action("GetArrCoXuongKhop", "CoXuongKhops")",
                type: "POST",
                data: { id: @Model.InformationExamination.ID },
                success: (res) => {
                    arrCoXuongKhop = res.res;
                    countEachClinical[4] = res.res.length;
                    if (countEachClinical[4] > 0) {
                        DetailClinicals[4].style.display = "block";
                    } else {
                        DetailClinicals[4].style.display = "none"
                    }
                    CountClinicals[4].innerHTML = countEachClinical[4];
                }
            })
        }

                /*Load Detail Test Cơ Xương Khớp*/
        function loadDetailCoXuongKhops() {
            $('#tableNewCoXuongKhops').DataTable().destroy();
            $('#tableNewCoXuongKhops').DataTable({
                    "ajax": {
                        "url": "@Url.Action("LoadDetailCoXuongKhops", "MultipleModels")",
                        "type": "POST",
                        "data": function (d) {
                            d.arr = arrCoXuongKhop
                        }
                    },
                    "columns": [
                        {
                            "data": "ChiDinh",
                            "name": "#",
                            "render": (data, type, row) => {
                                var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='CoXuongKhop.ChiDinh' onchange='updateNewCountClinicals(" + row.ID + ',' + 4 + ',' + '"CoXuongKhop-"' +")'>"
                                return checkbox;
                            },
                        },
                        {
                            "data": "Name",
                            "name": "Bệnh Cơ Xương Khớp",
                            "render": (data, type, row) => {
                                if (row.Dangerous == false) {
                                    var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label>"
                                } else {
                                    var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label><span style='color: red'> *</span>"
                                }
                                return label;
                            }
                        }
                    ],
                    "language": {
                        "emptyTable": "No data available",
                        "oPaginate": {
                            sNext: '<i class="fa fa-chevron-right"></i>',
                            sPrevious: '<i class="fa fa-chevron-left"></i>',
                        },
                        "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                        "lengthMenu": "Hiển thị _MENU_ danh mục cơ xương khớp",
                        "search": "Tìm kiếm:",
                    },
                })
        }

        getArrThanKinh();
        function getArrThanKinh() {
            $.ajax({
                url: "@Url.Action("GetArrThanKinh", "ThanKinhs")",
                type: "POST",
                data: { id: @Model.InformationExamination.ID },
                success: (res) => {
                    arrThanKinh = res.res;
                    countEachClinical[5] = res.res.length;
                    if (countEachClinical[5] > 0) {
                        DetailClinicals[5].style.display = "block";
                    } else {
                        DetailClinicals[5].style.display = "none"
                    }
                    CountClinicals[5].innerHTML = countEachClinical[5];
                }
            })
        }

                /*Load Detail Test Thần Kinh*/
        function loadDetailThanKinhs() {
            $('#tableNewThanKinhs').DataTable().destroy();
            $('#tableNewThanKinhs').DataTable({
                    "ajax": {
                        "url": "@Url.Action("loadDetailThanKinhs", "MultipleModels")",
                        "type": "POST",
                        "data": function (d) {
                            d.arr = arrThanKinh
                        }
                    },
                    "columns": [
                        {
                            "data": "ChiDinh",
                            "name": "#",
                            "render": (data, type, row) => {
                                var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='ThanKinh.ChiDinh' onchange='updateNewCountClinicals(" + row.ID + ',' + 5 + ',' + '"ThanKinh-"' +")'>"
                                return checkbox;
                            },
                        },
                        {
                            "data": "Name",
                            "name": "Bệnh Thần Kinh",
                            "render": (data, type, row) => {
                                if (row.Dangerous == false) {
                                    var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label>"
                                } else {
                                    var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label><span style='color: red'> *</span>"
                                }
                                return label;
                            }
                        }
                    ],
                    "language": {
                        "emptyTable": "No data available",
                        "oPaginate": {
                            sNext: '<i class="fa fa-chevron-right"></i>',
                            sPrevious: '<i class="fa fa-chevron-left"></i>',
                        },
                        "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                        "lengthMenu": "Hiển thị _MENU_ danh mục thần kinh",
                        "search": "Tìm kiếm:",
                    },
                })
        }

        getArrTamThan();
        function getArrTamThan() {
            $.ajax({
                url: "@Url.Action("GetArrTamThan", "TamThans")",
                type: "POST",
                data: { id: @Model.InformationExamination.ID },
                success: (res) => {
                    arrTamThan = res.res;
                    countEachClinical[6] = res.res.length;
                    if (countEachClinical[6] > 0) {
                        DetailClinicals[6].style.display = "block";
                    } else {
                        DetailClinicals[6].style.display = "none"
                    }
                    CountClinicals[6].innerHTML = countEachClinical[6];
                }
            })
        }

                /*Load Detail Test Tâm Thần*/
        function loadDetailTamThans() {
            $('#tableNewTamThans').DataTable().destroy();
            $('#tableNewTamThans').DataTable({
                    "ajax": {
                        "url": "@Url.Action("loadDetailTamThans", "MultipleModels")",
                        "type": "POST",
                        "data": function (d) {
                            d.arr = arrTamThan
                        }
                    },
                    "columns": [
                        {
                            "data": "ChiDinh",
                            "name": "#",
                            "render": (data, type, row) => {
                                var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='TamThan.ChiDinh' onchange='updateNewCountClinicals(" + row.ID + ',' + 6 + ',' + '"TamThan-"' +")'>"
                                return checkbox;
                            },
                        },
                        {
                            "data": "Name",
                            "name": "Bệnh Tâm Thần",
                            "render": (data, type, row) => {
                                if (row.Dangerous == false) {
                                    var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label>"
                                } else {
                                    var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label><span style='color: red'> *</span>"
                                }
                                return label;
                            }
                        }
                    ],
                    "language": {
                        "emptyTable": "No data available",
                        "oPaginate": {
                            sNext: '<i class="fa fa-chevron-right"></i>',
                            sPrevious: '<i class="fa fa-chevron-left"></i>',
                        },
                        "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                        "lengthMenu": "Hiển thị _MENU_ danh mục tâm thần",
                        "search": "Tìm kiếm:",
                    },
                })
        }

        getArrNgoaiKhoa();
        function getArrNgoaiKhoa() {
            $.ajax({
                url: "@Url.Action("GetArrNgoaiKhoa", "NgoaiKhoas")",
                type: "POST",
                data: { id: @Model.InformationExamination.ID },
                success: (res) => {
                    arrNgoaiKhoa = res.res;
                    countEachClinical[7] = res.res.length;
                    if (countEachClinical[7] > 0) {
                        DetailClinicals[7].style.display = "block";
                    } else {
                        DetailClinicals[7].style.display = "none"
                    }
                    CountClinicals[7].innerHTML = countEachClinical[7];
                }
            })
        }

            /*Load Detail Test Ngoại Khoa*/
        function loadDetailNgoaiKhoas() {
            $('#tableNewNgoaiKhoas').DataTable().destroy();
            $('#tableNewNgoaiKhoas').DataTable({
                    "ajax": {
                        "url": "@Url.Action("loadDetailNgoaiKhoas", "MultipleModels")",
                        "type": "POST",
                        "data": function (d) {
                            d.arr = arrNgoaiKhoa
                        }
                    },
                    "columns": [
                        {
                            "data": "ChiDinh",
                            "name": "#",
                            "render": (data, type, row) => {
                                var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='NgoaiKhoa.ChiDinh' onchange='updateNewCountClinicals(" + row.ID + ',' + 7 + ',' + '"NgoaiKhoa-"' +")'>"
                                return checkbox;
                            },
                        },
                        {
                            "data": "Name",
                            "name": "Bệnh Ngoại Khoa",
                            "render": (data, type, row) => {
                                if (row.Dangerous == false) {
                                    var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label>"
                                } else {
                                    var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label><span style='color: red'> *</span>"
                                }
                                return label;
                            }
                        }
                    ],
                    "language": {
                        "emptyTable": "No data available",
                        "oPaginate": {
                            sNext: '<i class="fa fa-chevron-right"></i>',
                            sPrevious: '<i class="fa fa-chevron-left"></i>',
                        },
                        "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                        "lengthMenu": "Hiển thị _MENU_ danh mục ngoại khoa",
                        "search": "Tìm kiếm:",
                    },
                })
        }

        getArrSanPhuKhoa();
        function getArrSanPhuKhoa() {
            $.ajax({
                url: "@Url.Action("GetArrSanPhuKhoa", "SanPhuKhoas")",
                type: "POST",
                data: { id: @Model.InformationExamination.ID },
                success: (res) => {
                    arrSanPhuKhoa = res.res;
                    countEachClinical[8] = res.res.length;
                    if (countEachClinical[8] > 0) {
                        DetailClinicals[8].style.display = "block";
                    } else {
                        DetailClinicals[8].style.display = "none"
                    }
                    CountClinicals[8].innerHTML = countEachClinical[8];
                }
            })
        }

        /*Load Detail Test Sản Phụ Khoa*/
        function loadDetailSanPhuKhoas() {
            $('#tableNewSanPhuKhoas').DataTable().destroy();
            $('#tableNewSanPhuKhoas').DataTable({
                "ajax": {
                    "url": "@Url.Action("loadDetailSanPhuKhoas", "MultipleModels")",
                    "type": "POST",
                    "data": function (d) {
                        d.arr = arrSanPhuKhoa
                    }
                },
                "columns": [
                    {
                        "data": "ChiDinh",
                        "name": "#",
                        "render": (data, type, row) => {
                            var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='SanPhuKhoa.ChiDinh' onchange='updateNewCountClinicals(" + row.ID + ',' + 8 + ',' + '"SanPhuKhoa-"' +")'>"
                            return checkbox;
                        },
                    },
                    {
                        "data": "Name",
                        "name": "Bệnh Sản Phụ Khoa",
                        "render": (data, type, row) => {
                            if (row.Dangerous == false) {
                                var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label>"
                            } else {
                                var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label><span style='color: red'> *</span>"
                            }
                            return label;
                        }
                    }
                ],
                "language": {
                    "emptyTable": "No data available",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ danh mục sản phụ khoa",
                    "search": "Tìm kiếm:",
                },
            })
        }

        getArrMat();
        function getArrMat() {
            $.ajax({
                url: "@Url.Action("GetArrMat", "Mats")",
                type: "POST",
                data: { id: @Model.InformationExamination.ID },
                success: (res) => {
                    arrMat = res.res;
                    countEachClinical[9] = res.res.length;
                    if (countEachClinical[9] > 0) {
                        DetailClinicals[9].style.display = "block";
                    } else {
                        DetailClinicals[9].style.display = "none"
                    }
                    CountClinicals[9].innerHTML = countEachClinical[9];
                }
            })
        }

        /*Load Detail Test Mắt*/
        function loadDetailMats() {
            $('#tableNewMats').DataTable().destroy();
            $('#tableNewMats').DataTable({
                "ajax": {
                    "url": "@Url.Action("loadDetailMats", "MultipleModels")",
                    "type": "POST",
                    "data": function (d) {
                        d.arr = arrMat
                    }
                },
                "columns": [
                    {
                        "data": "ChiDinh",
                        "name": "#",
                        "render": (data, type, row) => {
                            var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='Mat.ChiDinh' onchange='updateNewCountClinicals(" + row.ID + ',' + 9 + ',' + '"Mat-"' +")'>"
                            return checkbox;
                        },
                    },
                    {
                        "data": "Name",
                        "name": "Bệnh Mắt",
                        "render": (data, type, row) => {
                            if (row.Dangerous == false) {
                                var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label>"
                            } else {
                                var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label><span style='color: red'> *</span>"
                            }
                            return label;
                        }
                    }
                ],
                "language": {
                    "emptyTable": "No data available",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ danh mục mắt",
                    "search": "Tìm kiếm:",
                },
            })
        }

        getArrTaiMuiHong();
        function getArrTaiMuiHong() {
            $.ajax({
                url: "@Url.Action("GetArrTaiMuiHong", "TaiMuiHongs")",
                type: "POST",
                data: { id: @Model.InformationExamination.ID },
                success: (res) => {
                    arrTaiMuiHong = res.res;
                    countEachClinical[10] = res.res.length;
                    if (countEachClinical[10] > 0) {
                        DetailClinicals[10].style.display = "block";
                    } else {
                        DetailClinicals[10].style.display = "none"
                    }
                    CountClinicals[10].innerHTML = countEachClinical[10];
                }
            })
        }

        /*Load Detail Test Tai*/
        function loadDetailTaiMuiHongs() {
            $('#tableNewTais').DataTable().destroy();
            $('#tableNewTais').DataTable({
                "ajax": {
                    "url": "@Url.Action("loadDetailTaiMuiHongs", "MultipleModels")",
                    "type": "POST",
                    "data": function (d) {
                        d.arr = arrTaiMuiHong
                    }
                },
                "columns": [
                    {
                        "data": "ChiDinh",
                        "name": "#",
                        "render": (data, type, row) => {
                            var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='Tai.ChiDinh' onchange='updateNewCountClinicals(" + row.ID + ',' + 10 + ',' + '"Tai-"' +")'>"
                            return checkbox;
                        },
                    },
                    {
                        "data": "Name",
                        "name": "Bệnh Tai-Mũi-Họng",
                        "render": (data, type, row) => {
                            if (row.Dangerous == false) {
                                var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label>"
                            } else {
                                var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label><span style='color: red'> *</span>"
                            }
                            return label;
                        }
                    }
                ],
                "language": {
                    "emptyTable": "No data available",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ danh mục tai-mũi-họng",
                    "search": "Tìm kiếm:",
                },
            })
        }

        getArrRangHamMat();
        function getArrRangHamMat() {
            $.ajax({
                url: "@Url.Action("GetArrRangHamMat", "RangHamMats")",
                type: "POST",
                data: { id: @Model.InformationExamination.ID },
                success: (res) => {
                    arrRangHamMat = res.res;
                    countEachClinical[11] = res.res.length;
                    if (countEachClinical[11] > 0) {
                        DetailClinicals[11].style.display = "block";
                    } else {
                        DetailClinicals[11].style.display = "none"
                    }
                    CountClinicals[11].innerHTML = countEachClinical[13];
                }
            })
        }

        /*Load Detail Test Răng Hàm Mặt*/
        function loadDetailRangHamMats() {
            $('#tableNewRangHamMats').DataTable().destroy();
            $('#tableNewRangHamMats').DataTable({
                "ajax": {
                    "url": "@Url.Action("loadDetailRangHamMats", "MultipleModels")",
                    "type": "POST",
                    "data": function (d) {
                        d.arr = arrRangHamMat
                    }
                },
                "columns": [
                    {
                        "data": "ChiDinh",
                        "name": "#",
                        "render": (data, type, row) => {
                            var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='RangHamMat.ChiDinh' onchange='updateNewCountClinicals(" + row.ID + ',' + 11 + ',' + '"RangHamMat-"' +")'>"
                            return checkbox;
                        },
                    },
                    {
                        "data": "Name",
                        "name": "Bệnh Răng Hàm Mặt",
                        "render": (data, type, row) => {
                            if (row.Dangerous == false) {
                                var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label>"
                            } else {
                                var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label><span style='color: red'> *</span>"
                            }
                            return label;
                        }
                    }
                ],
                "language": {
                    "emptyTable": "No data available",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ danh mục răng hàm mặt",
                    "search": "Tìm kiếm:",
                },
            })
        }

        getArrDaLieu();
        function getArrDaLieu() {
            $.ajax({
                url: "@Url.Action("GetArrDaLieu", "DaLieux")",
                type: "POST",
                data: { id: @Model.InformationExamination.ID },
                success: (res) => {
                    arrDaLieu = res.res;
                    countEachClinical[12] = res.res.length;
                    if (countEachClinical[12] > 0) {
                        DetailClinicals[12].style.display = "block";
                    } else {
                        DetailClinicals[12].style.display = "none"
                    }
                    CountClinicals[12].innerHTML = countEachClinical[14];
                }
            })
        }

        /*Load Detail Test Da Liễu*/
        function loadDetailDaLieus() {
            $('#tableNewDaLieus').DataTable().destroy();
            $('#tableNewDaLieus').DataTable({
                    "ajax": {
                        "url": "@Url.Action("loadDetailDaLieus", "MultipleModels")",
                        "type": "POST",
                        "data": function (d) {
                            d.arr = arrDaLieu
                        }
                    },
                    "columns": [
                        {
                            "data": "ChiDinh",
                            "name": "#",
                            "render": (data, type, row) => {
                                var checkbox = "<input type='checkbox' checked class='form-check-input form-check-primary' name='DaLieu.ChiDinh' onchange='updateNewCountClinicals(" + row.ID + ',' + 12 + ',' + '"DaLieu-"' +")'>"
                                return checkbox;
                            },
                        },
                        {
                            "data": "Name",
                            "name": "Bệnh Da Liễu",
                            "render": (data, type, row) => {
                                if (row.Dangerous == false) {
                                    var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label>"
                                } else {
                                    var label = "<label class='form-check-label' for='customColorCheckNew-" + row.ID + "'>" + row.Name + "</label><span style='color: red'> *</span>"
                                }
                                return label;
                            }
                        }
                    ],
                    "language": {
                        "emptyTable": "No data available",
                        "oPaginate": {
                            sNext: '<i class="fa fa-chevron-right"></i>',
                            sPrevious: '<i class="fa fa-chevron-left"></i>',
                        },
                        "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                        "lengthMenu": "Hiển thị _MENU_ danh mục da liễu",
                        "search": "Tìm kiếm:",
                    },
                })
        }

        var tableNewCD = $('*.tableNewChiDinh');
        var destroyTable = $('*#destroytable');
        tableNewCD.each((index, table) => {
            destroyTable[index].addEventListener('click', (e) => {
                var tableID = table.getAttribute("id")
                var tableCD = $('#' + tableID).DataTable();
                tableCD.destroy();
            })
        })

        function updateNewCountClinicals(id, numTable, row) {
            switch (numTable) {
                case 0:
                    var existTuanHoans = arrTuanHoan.indexOf("" + id);
                    arrTuanHoan.splice(existTuanHoans, 1);
                    break;
                case 1:
                    var existHoHaps = arrHoHap.indexOf("" + id);
                    arrHoHap.splice(existHoHaps, 1);
                    break;
                case 2:
                    var existTieuHoas = arrTieuHoa.indexOf("" + id);
                    arrTieuHoa.splice(existTieuHoas, 1);
                    break;
                case 3:
                    var existThanTietNieus = arrThanTietNieu.indexOf("" + id);
                    arrThanTietNieu.splice(existThanTietNieus, 1);
                    break;
                case 4:
                    var existCoXuongKhops = arrCoXuongKhop.indexOf("" + id);
                    arrCoXuongKhop.splice(existCoXuongKhops, 1);
                    break;
                case 5:
                    var existThanKinhs = arrThanKinh.indexOf("" + id);
                    arrThanKinh.splice(existThanKinhs, 1);
                    break;
                case 6:
                    var existTamThans = arrTamThan.indexOf("" + id);
                    arrTamThan.splice(existTamThans, 1);
                    break;
                case 7:
                    var existNgoaiKhoas = arrNgoaiKhoa.indexOf("" + id);
                    arrNgoaiKhoa.splice(existNgoaiKhoas, 1);
                    break;
                case 8:
                    var existSanPhuKhoas = arrSanPhuKhoa.indexOf("" + id);
                    arrSanPhuKhoa.splice(existSanPhuKhoas, 1);
                    break;
                case 9:
                    var existMats = arrMat.indexOf("" + id);
                    arrMat.splice(existMats, 1);
                    break;
                case 10:
                    var existTais = arrTaiMuiHong.indexOf("" + id);
                    arrTaiMuiHong.splice(existTais, 1);
                    break;
                case 11:
                    var existRangHamMats = arrRangHamMat.indexOf("" + id);
                    arrRangHamMat.splice(existRangHamMats, 1);
                    break;
                case 12:
                    var existDaLieus = arrDaLieu.indexOf("" + id);
                    arrDaLieu.splice(existDaLieus, 1);
                    break;
            }
            countEachClinical[numTable]--;
            CountClinicals[numTable].innerHTML = countEachClinical[numTable];
            var GetTable = tableNewCD[numTable].getAttribute("id");
            $("#" + row + id).prop("value", false);
            $("#" + row + id).prop("checked", false);
            $('#' + GetTable).DataTable().ajax.reload();
        }

        var listTableClinical = $('*.tableLoadClinical');
        listTableClinical.each((index, table) => {
            $('#' + table.id).DataTable({
                "pageLength": 10,
                "language": {
                    "emptyTable": "No data available",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ danh mục bệnh",
                    "search": "Tìm kiếm:",
                },
            });
        })

        listTableClinical.each((index, table) => {
            var listClinical = $('#' + table.id + ' tbody td *input[type="checkbox"]');
            listClinical.each((index1, value) => {
                value.addEventListener('click', (e) => {
                    if (e.target.checked) {
                        if (value.closest('tr').querySelector('span[style="color:red"]') != null) {
                            Swal.fire({
                                title: 'Đây là bệnh nguy hiểm. Xác nhận chọn',
                                showCancelButton: true,
                                confirmButtonText: 'Xác Nhận',
                                cancelButtonText: 'Hủy',
                                allowOutsideClick: false
                            }).then((result) => {
                                /* Read more about isConfirmed, isDenied below */
                                if (result.isConfirmed) {
                                    var id = value.getAttribute("data-id");
                                    updateCountClinicals(id, e, value, index)
                                    value.checked = true;
                                }
                                else if (result.dismiss === Swal.DismissReason.cancel) {
                                    value.checked = false;
                                }
                            })
                        } else {
                            var id = value.getAttribute("data-id");
                            updateCountClinicals(id, e, value, index)
                            value.checked = true;
                        }
                    }
                    else {
                        var id = value.getAttribute("data-id");
                        updateCountClinicals(id, e, value, index)
                        value.checked = false;
                    }
                })
            })
        })

        function updateCountClinicals(id, e, value, indextable) {
            if (e.target.checked == true) {
                value.setAttribute("value", true);
                value.setAttribute("checked", true);
                countEachClinical[indextable]++;
                switch (indextable) {
                    case 0:
                        arrTuanHoan.push(id);
                        break;
                    case 1:
                        arrHoHap.push(id);
                        break;
                    case 2:
                        arrTieuHoa.push(id);
                        break;
                    case 3:
                        arrThanTietNieu.push(id);
                        break;
                    case 4:
                        arrCoXuongKhop.push(id);
                        break;
                    case 5:
                        arrThanKinh.push(id);
                        break;
                    case 6:
                        arrTamThan.push(id);
                        break;
                    case 7:
                        arrNgoaiKhoa.push(id);
                        break;
                    case 8:
                        arrSanPhuKhoa.push(id);
                        break;
                    case 9:
                        arrMat.push(id);
                        break;
                    case 10:
                        arrTaiMuiHong.push(id);
                        break;
                    case 11:
                        arrRangHamMat.push(id);
                        break;
                    case 12:
                        arrDaLieu.push(id);
                        break;
                }
            } else {
                countEachClinical[indextable]--;
                value.setAttribute("value", false);
                value.setAttribute("checked", false);
                switch (indextable) {
                    case 0:
                        const indexArrTuanHoans = arrTuanHoan.indexOf("" + id);
                        arrTuanHoan.splice(indexArrTuanHoans, 1);
                        break;
                    case 1:
                        const indexArrHoHaps = arrHoHap.indexOf("" + id);
                        arrHoHap.splice(indexArrHoHaps, 1);
                        break;
                    case 2:
                        const indexArrTieuHoas = arrTieuHoa.indexOf("" + id);
                        arrTieuHoa.splice(indexArrTieuHoas, 1);
                        break;
                    case 3:
                        const indexArrThanTietNieus = arrThanTietNieu.indexOf("" + id);
                        arrThanTietNieu.splice(indexArrThanTietNieus, 1);
                        break;
                    case 4:
                        const indexArrCoXuongKhops = arrCoXuongKhop.indexOf("" + id);
                        arrCoXuongKhop.splice(indexArrCoXuongKhops, 1);
                        break;
                    case 5:
                        const indexArrThanKinhs = arrThanKinh.indexOf("" + id);
                        arrThanKinh.splice(indexArrThanKinhs, 1);
                        break;
                    case 6:
                        const indexArrTamThans = arrTamThan.indexOf("" + id);
                        arrTamThan.splice(indexArrTamThans, 1);
                        break;
                    case 7:
                        const indexArrNgoaiKhoas = arrNgoaiKhoa.indexOf("" + id);
                        arrNgoaiKhoa.splice(indexArrNgoaiKhoas, 1);
                        break;
                    case 8:
                        const indexArrSanPhuKhoas = arrSanPhuKhoa.indexOf("" + id);
                        arrSanPhuKhoa.splice(indexArrSanPhuKhoas, 1);
                        break;
                    case 9:
                        const indexArrMats = arrMat.indexOf("" + id);
                        arrMat.splice(indexArrMats, 1);
                        break;
                    case 10:
                        const indexArrTais = arrTaiMuiHong.indexOf("" + id);
                        arrTaiMuiHong.splice(indexArrTais, 1);
                        break;
                    case 11:
                        const indexArrRangHamMats = arrRangHamMat.indexOf("" + id);
                        arrRangHamMat.splice(indexArrRangHamMats, 1);
                        break;
                    case 12:
                        const indexArrDaLieus = arrDaLieu.indexOf("" + id);
                        arrDaLieu.splice(indexArrDaLieus, 1);
                        break;
                }
            }
            if (countEachClinical[indextable] > 0) {
                DetailClinicals[indextable].style.display = "block";
            } else {
                DetailClinicals[indextable].style.display = "none"
            }
            CountClinicals[indextable].innerHTML = countEachClinical[indextable];
        }


        //$(".imgAdd").click(function () {
        //    var nameInput = $(this).closest(".row").find("input[type='file']").attr("name");
        //    $(this).closest(".row").find('.imgAdd').before('<div class="col-sm-4 imgUp"><div class="imagePreview"></div><label class="btn btn-primary">Upload<input type="file" multiple class="uploadFile img" name="' + nameInput + '" value="Upload Photo" style="width:0px;height:0px;overflow:hidden;"></label><i class="fa fa-times del"></i></div>');
        //});
        //$(document).on("click", "i.del", function () {
        //    $(this).parent().remove();
        //});
        //$(function () {
        //    $(document).on("change", ".uploadFile", function () {
        //        var uploadFile = $(this);
        //        var files = !!this.files ? this.files : [];
        //        if (!files.length || !window.FileReader) return; // no file selected, or no FileReader support

        //        if (/^image/.test(files[0].type)) { // only image file
        //            var reader = new FileReader(); // instance of the FileReader
        //            reader.readAsDataURL(files[0]); // read the local file

        //            reader.onloadend = function () { // set image data as background of div
        //                //alert(uploadFile.closest(".upimage").find('.imagePreview').length);
        //                uploadFile.closest(".imgUp").find('.imagePreview').css("background-image", "url(" + this.result + ")");
        //            }
        //        }

        //    });
        //});
        const editors = document.querySelectorAll('.editor');
        editors.forEach(item => {
            ClassicEditor
                .create(item, {
                    toolbar: ['bold', 'italic', 'link', 'undo', 'redo', 'numberedList', 'bulletedList']
                })
                .catch(error => {
                    console.error("Toang" + error);
                });
        })

        @*$('#updateMedication').click((e) => {
            var dataMedication = $('#FormEdit').serialize();
            $.ajax({
                url: "@Url.Action("EditMedication", "Prescription_Detail")",
                type: "POST",
                data: JSON.stringify({ multiplesModel: dataMedication }).replaceAll('"}', ''),
                success: function (res) {
                    if (res.success) {
                        Swal.fire({
                            icon: 'success',
                            title: 'Thành công!',
                            text: 'Bạn đã cập nhật toa thuốc thành công',
                            confirmButtonText: 'Xác Nhận'
                        })
                    }
                }
            })
        })*@

        /*Validate Form*/
        $('form').each((i, obj) => {
            $.validator.addMethod('checkPhoneNumber', function (value, element) {
                return this.optional(element) || /(84|0[3|5|7|8|9])+([0-9]{8})\b/.test(value);
            }, "Vui lòng nhập đúng định dạng");
            $(function () {
                $(obj).validate({
                    rules: {
                        "Patient.Name": {
                            required: true,
                            normalizer: function (value) {
                                return $.trim(value);
                            }
                        },
                        "Patient.BirthDate": {
                            required: true,
                        },
                        "Patient.NumHome": {
                            required: true,
                            normalizer: function (value) {
                                return $.trim(value);
                            }
                        },
                        "Patient.Address": {
                            required: true,
                            normalizer: function (value) {
                                return $.trim(value);
                            }
                        },
                        "Patient.Phone": {
                            required: true,
                            checkPhoneNumber: true
                        },
                        "Patient.InsuranceCode": {
                            required: true,
                            normalizer: function (value) {
                                return $.trim(value);
                            }
                        }
                    },
                    messages: {
                        "Patient.Name": {
                            required: "Trường này bắt buộc nhập"
                        },
                        "Patient.BirthDate": {
                            required: "Trường này bắt buộc nhập"
                        },
                        "Patient.NumHome": {
                            required: "Trường này bắt buộc nhập"
                        },
                        "Patient.Address": {
                            required: "Trường này bắt buộc nhập"
                        },
                        "Patient.Phone": {
                            required: "Trường này bắt buộc nhập",
                            matches: "Nhập đúng định dạng"
                        },
                        "Patient.InsuranceCode": {
                            required: "Trường này bắt buộc nhập",
                        }
                    },
                    errorClass: 'invalidForm',
                    validClass: 'validForm',
                });
            });
        })


        /*Ông/Bà*/
        $(document).ready(function () {
            $('#tableHistoryDiseases1').dataTable({
                "language": {
                    "emptyTable": "No data available, please click on <b>Loading...</b> button",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ tiền sử bệnh",
                    "search": "Tìm kiếm:",
                },
            });
        });

        /*Cha/Mẹ*/
        $(document).ready(function () {
            $('#tableHistoryDiseases2').dataTable({
                "language": {
                    "emptyTable": "No data available, please click on <b>Loading...</b> button",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ tiền sử bệnh",
                    "search": "Tìm kiếm:",
                },
            });
        });

        /*Anh/Chị em*/
        $(document).ready(function () {
            $('#tableHistoryDiseases3').dataTable({
                "language": {
                    "emptyTable": "No data available, please click on <b>Loading...</b> button",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ tiền sử bệnh",
                    "search": "Tìm kiếm:",
                },
            });
        });

        $(document).ready(function () {
            $('#tableMedicalHistories').dataTable({
                "language": {
                    "emptyTable": "No data available, please click on <b>Loading...</b> button",
                    "oPaginate": {
                        sNext: '<i class="fa fa-chevron-right"></i>',
                        sPrevious: '<i class="fa fa-chevron-left"></i>',
                    },
                    "info": "Hiển thị _START_/_END_ trên tổng _TOTAL_",
                    "lengthMenu": "Hiển thị _MENU_ bệnh sử",
                    "search": "Tìm kiếm:",
                },
            });
        });

                var k = 1;
        var formatCss = document.querySelectorAll('.choices__list--single');
        formatCss.forEach((value, index) => {
            value.classList.add('form-control');
            value.style.paddingLeft = '12px';
        })
        var select = document.querySelector('#NameMedication');

        function insRowMedication() {
            var NameMedication = $('#NameMedication').text();
            var UnitMedication = $('#UnitMedication').val();
            var NoteMedication = $('#NoteMedication').val();
            var IdMedication = $('#IDMedication').val();
            var medication = document.getElementById('TableMedication');
            if (UnitMedication != '' && UnitMedication != 0 && NoteMedication != '') {
                var row = medication.insertRow(k);
                var cell0 = row.insertCell(0);
                var cell1 = row.insertCell(1);
                var cell2 = row.insertCell(2);
                cell0.innerHTML = "<input type='number' name='Prescription_Details" + '[' + (k - 1) + ']' + ".Medication_ID' value='" + IdMedication + "' hidden /> <input style='width:100%;border:none' type='text' value='" + NameMedication + "' readonly/>";
                cell1.innerHTML = "<input style='width:100%;border:none' type='number' name='Prescription_Details" + '[' + (k - 1) + ']' + ".NumMedication' value='" + UnitMedication + "' readonly/>";
                cell2.innerHTML = "<input style='width:100%;border:none' type='text' name='Prescription_Details" + '[' + (k - 1) + ']' + ".Note' value='" + NoteMedication + "' readonly/>";
                k++;
            }
            else {
                Swal.fire({
                    icon: 'error',
                    title: 'Thêm thất bại...',
                    text: 'Vui lòng nhập Ghi chú và Liều lượng thuốc!',
                })
            }
        }
        loadMedication();
        function loadMedication() {
            var InfoID = document.querySelector('#InformationExamination_ID').getAttribute('value');
            var medication = document.getElementById('TableMedication');
            $.ajax({
                type: "POST",
                data: { id: InfoID },
                url: "@Url.Action("LoadPrescription", "Prescription_Detail")",
                success: (res) => {
                    $.each(res.data, function (index, medicationByID) {
                        var row = medication.insertRow(k);
                        var cell0 = row.insertCell(0);
                        var cell1 = row.insertCell(1);
                        var cell2 = row.insertCell(2);
                        cell0.innerHTML = "<input type='number' name='Prescription_Details" + '[' + (k - 1) + ']' + ".InformationExamination_ID' value='" + medicationByID.InformationExamination_ID + "' hidden/> <input type='number' name='Prescription_Details" + '[' + (k - 1) + ']' + ".Medication_ID' value='" + medicationByID.Medication_ID + "' hidden /> <input style='width:100%;border:none;pointer-events: none;' type='text' value='" + medicationByID.Name + "' readonly/>";
                        cell1.innerHTML = "<input style='width:100%;border:none;pointer-events: none;' type='number' name='Prescription_Details" + '[' + (k - 1) + ']' + ".NumMedication' value='" + medicationByID.NumMedication + "' readonly/>";
                        cell2.innerHTML = "<input style='width:100%;border:none;pointer-events: none;' type='text' name='Prescription_Details" + '[' + (k - 1) + ']' + ".Note' value='" + medicationByID.Note + "' readonly/>";
                        k++;
                    })
                }
            })
        }

        var selectDiagnostic = document.querySelector('#NameDiagnostic');
        selectDiagnostic.addEventListener('change', (e) => {
            var id = parseInt(e.target.value);
            $.ajax({
                type: "POST",
                url: "@Url.Action("FindDiagnostic", "DiagnosticsCategories")",
                data: { id: id},
                success: (res) => {
                    document.querySelector('#Detail_DiagnosticsCategory_DiagnosticsCategory_ID').value = res.data.ID;
                    document.querySelector('#AdviceDiagnostic').value = res.data.Advice;
                }
            })
        })

        $(function () {
            $.ajax({
                url: "@Url.Action("getData1", "Prescription_Detail")",
                type: "GET",
                data: { id: @Model.InformationExamination.ID},
                success: (res) => {
                    const element1 = document.querySelector('#NameDiagnostic');
                    const choices1 = new Choices(element1, {
                        choices: res.diagnosticCategories,
                        searchPlaceholderValue: 'Vui Lòng Chọn Tên Chẩn Đoán',
                        searchFields: ['label']
                    });
                    console.log(choices1)
                    const element2 = document.querySelector('#NameMedication');
                    const choices2 = new Choices(element2, {
                        choices: res.medications,
                        searchPlaceholderValue: 'Vui Lòng Chọn Tên Thuốc',
                        searchFields: ['label'],
                    });
                }
            })
        })

        if (window.location.href.indexOf("Admin/MultipleModels") > -1) {
            $('a[href="/CP24Team08/Admin/Patients"]').parent().addClass("active");
        }
    </script>
}