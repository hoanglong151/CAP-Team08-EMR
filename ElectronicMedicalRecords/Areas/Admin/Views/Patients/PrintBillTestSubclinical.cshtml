@model ElectronicMedicalRecords.Models.MultiplesModel
@{
    ViewBag.Title = "PrintExaminationInfo";
    Layout = "~/Areas/Admin/Views/Shared/Print.cshtml";
    var totalSHM = 0;
    var totalDM = 0;
    var totalNM = 0;
    var totalNT = 0;
    var totalMD = 0;
    var totalDCD = 0;
    var totalVS = 0;
}
<style>
    p {
        text-align: left
    }
</style>
<div class="container bootstrap snippets bootdeys">
    <div class="row body-pay">
        <div class="col-sm-12">
            <div class="panel panel-default invoice" id="invoice">
                <div class="panel-body">
                    <div class="invoice-ribbon"><div class="ribbon-inner">PAID</div></div>
                    <div class="row bg-row">

                        <div class="col-sm-6 top-left">
                            <img class="logo" src="~/asset/vl-logo.png" />
                        </div>
                        <div class="col-sm-6 top-right">
                            <h3 class="marginright txt-white">@Model.Patient.MaBN</h3>
                            <span class="marginright txt-white">@DateTime.Now</span>
                        </div>

                    </div>
                    <hr>
                    <div class="row">
                        <div style="margin-bottom:12px">
                            <a href="javascript:window.print()" class="btn btn-success d-inline-block" id="invoice-print"><i class="fa fa-print"></i> Print Invoice</a>
                            <a href="@Url.Action("PaymentTestSubclinical","MultipleModels",new { id = Model.InformationExamination.ID })" class="btn btn-warning" id="PrintBill">Thanh Toán</a>
                        </div>
                        <p class="lead marginbottom">Thông Tin Bệnh Nhân</p>
                        <div class="d-flex">
                            <div class="col-xs-6 from w-100">
                                <p>Bệnh Nhân : @Model.Patient.Name</p>
                                <p>Địa Chỉ: @Model.Patient.Address</p>
                                <p>Giới Tính: @ViewBag.Gender</p>
                            </div>
                            <div class="col-xs-6 to w-100">
                                <p>Ngày Sinh: @Model.Patient.BirthDate</p>
                                <p>Số Điện Thoại: @Model.Patient.Phone</p>
                                <p>Số BHYT: @Model.Patient.InsuranceCode</p>
                            </div>
                        </div>
                        <p class="lead marginbottom">Thông Tin Bệnh Án</p>
                        <div class="col-xs-12 to">
                            <p>Tiền Sử: @Model.Patient.MedicalHistory</p>
                            <p>Bệnh Sử: @Model.Patient.HistoryDisease</p>
                        </div>
                    </div>

                    <div class="row">
                        <p class="lead marginbottom">Thông Tin Khám Bệnh</p>
                        <div class="col-xs-12 from">
                            <div class="d-flex justify-content-start">
                                <p class="col-xs-6 w-100">Ngày Khám: @Model.InformationExamination.DateExamine</p>
                                <p class="col-xs-6 w-100">Bác Sĩ Chỉ Định: @ViewBag.Doctor</p>
                            </div>
                            <div class="d-flex">
                                <p class="col-xs-4 w-100">Nhịp Tim: @Model.InformationExamination.HeartBeat</p>
                                <p class="col-xs-4 w-100">Nhịp Thở: @Model.InformationExamination.Breathing</p>
                                <p class="col-xs-4 w-100">Huyết Áp: @Model.InformationExamination.BloodPressure</p>
                            </div>
                            <div class="d-flex">
                                <p class="col-xs-4 w-100">Cân Nặng: @Model.InformationExamination.Weight</p>
                                <p class="col-xs-4 w-100">Chiều Cao: @Model.InformationExamination.Height</p>
                                <p class="col-xs-4 w-100">Tình Trạng: @ViewBag.PatientStatus</p>
                            </div>
                        </div>

                    </div>
                    @if (ViewBag.CTMaus != null && ViewBag.CTMaus.Count != 0)
                    {
                        <div class="row body-pay">
                            <p class="lead marginbottom">Xét Nghiệm Công Thức Máu</p>
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th class="text-center" style="width:5%">#</th>
                                        <th style="width:50%">Chỉ Định</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (int i = 0; i < ViewBag.CTMaus.Count; i++)
                                    {
                                        <tr>
                                            <td class="text-center">@(i + 1)</td>
                                            <td>@ViewBag.CTMaus[i].CTMau.NameTest</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                            <p><strong>Tổng Tiền: </strong>@Model.InformationExamination.PriceCTMaus.Value.ToString("N0") VNĐ</p>
                        </div>
                    }
                    @if (ViewBag.SHMaus != null && ViewBag.SHMaus.Count != 0)
                    {
                        <div class="row body-pay">
                            <p class="lead marginbottom">Xét Nghiệm Sinh Hóa Máu</p>
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th class="text-center" style="width:5%">#</th>
                                        <th style="width:50%">Chỉ Định</th>
                                        <th>Thành tiền</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (int i = 0; i < ViewBag.SHMaus.Count; i++)
                                    {
                                        totalSHM += ViewBag.SHMaus[i].SinhHoaMau.Price;
                                        <tr>
                                            <td class="text-center">@(i + 1)</td>
                                            <td>@ViewBag.SHMaus[i].SinhHoaMau.NameTest</td>
                                            <td>@ViewBag.SHMaus[i].SinhHoaMau.Price.ToString("N0")</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                            <p><strong>Tổng Tiền: </strong>@totalSHM.ToString("N0") VNĐ</p>
                        </div>
                    }
                    @if (ViewBag.DMaus != null && ViewBag.DMaus.Count != 0)
                    {
                        <div class="row body-pay">
                            <p class="lead marginbottom">Xét Nghiệm Đông Máu</p>
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th class="text-center" style="width:5%">#</th>
                                        <th style="width:50%">Chỉ Định</th>
                                        <th>Thành tiền</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (int i = 0; i < ViewBag.DMaus.Count; i++)
                                    {
                                        totalDM += ViewBag.DMaus[i].DongMau.Price;
                                        <tr>
                                            <td class="text-center">@(i + 1)</td>
                                            <td>@ViewBag.DMaus[i].DongMau.NameTest</td>
                                            <td>@ViewBag.DMaus[i].DongMau.Price.ToString("N0")</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                            <p><strong>Tổng Tiền: </strong>@totalDM.ToString("N0") VNĐ</p>
                        </div>
                    }
                    @if (ViewBag.NhomMaus != null && ViewBag.NhomMaus.Count != 0)
                    {
                        <div class="row body-pay">
                            <p class="lead marginbottom">Xét Nghiệm Nhóm Máu</p>
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th class="text-center" style="width:5%">#</th>
                                        <th style="width:50%">Chỉ Định</th>
                                        <th>Thành Tiền</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (int i = 0; i < ViewBag.NhomMaus.Count; i++)
                                    {
                                        totalNM += ViewBag.NhomMaus[i].NhomMau.Price;
                                        <tr>
                                            <td class="text-center">@(i + 1)</td>
                                            <td>@ViewBag.NhomMaus[i].NhomMau.NameTest</td>
                                            <td>@ViewBag.NhomMaus[i].NhomMau.Price.ToString("N0")</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                            <p><strong>Tổng Tiền: </strong>@totalNM.ToString("N0") VNĐ</p>
                        </div>
                    }
                    @if (ViewBag.NuocTieu != null && ViewBag.NuocTieu.Count != 0)
                    {
                        <div class="row body-pay">
                            <p class="lead marginbottom">Xét Nghiệm Nước Tiểu</p>
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th class="text-center" style="width:5%">#</th>
                                        <th style="width:50%">Chỉ Định</th>
                                        <th style="width:50%">Thành Tiền</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (int i = 0; i < ViewBag.NuocTieu.Count; i++)
                                    {
                                        totalNT += ViewBag.NuocTieu[i].Urine.Price;
                                        <tr>
                                            <td class="text-center">@(i + 1)</td>
                                            <td>@ViewBag.NuocTieu[i].Urine.Name</td>
                                            <td>@ViewBag.NuocTieu[i].Urine.Price.ToString("N0")</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                            <p><strong>Tổng Tiền: </strong>@totalNT.ToString("N0") VNĐ</p>
                        </div>
                    }
                    @if (ViewBag.MienDich != null && ViewBag.MienDich.Count != 0)
                    {
                        <div class="row body-pay">
                            <p class="lead marginbottom">Xét Nghiệm Miễn Dịch</p>
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th class="text-center" style="width:5%">#</th>
                                        <th style="width:50%">Chỉ Định</th>
                                        <th style="width:50%">Thành Tiền</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (int i = 0; i < ViewBag.MienDich.Count; i++)
                                    {
                                        totalMD += ViewBag.MienDich[i].Immune.Price;
                                        <tr>
                                            <td class="text-center">@(i + 1)</td>
                                            <td>@ViewBag.MienDich[i].Immune.NameTest</td>
                                            <td>@ViewBag.MienDich[i].Immune.Price.ToString("N0")</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                            <p><strong>Tổng Tiền: </strong>@totalMD.ToString("N0") VNĐ</p>
                        </div>
                    }
                    @if (ViewBag.DichChocDo != null && ViewBag.DichChocDo.Count != 0)
                    {
                        <div class="row body-pay">
                            <p class="lead marginbottom">Xét Nghiệm Dịch Chọc Dò</p>
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th class="text-center" style="width:5%">#</th>
                                        <th style="width:50%">Chỉ Định</th>
                                        <th style="width:50%">Thành Tiền</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (int i = 0; i < ViewBag.DichChocDo.Count; i++)
                                    {
                                        totalDCD += ViewBag.DichChocDo[i].Amniocente.Price;
                                        <tr>
                                            <td class="text-center">@(i + 1)</td>
                                            <td>@ViewBag.DichChocDo[i].Amniocente.NameTest</td>
                                            <td>@ViewBag.DichChocDo[i].Amniocente.Price.ToString("N0")</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                            <p><strong>Tổng Tiền: </strong>@totalDCD.ToString("N0") VNĐ</p>
                        </div>
                    }
                    @if (ViewBag.ViSinh != null && ViewBag.ViSinh.Count != 0)
                    {
                        <div class="row body-pay">
                            <p class="lead marginbottom">Xét Nghiệm Vi Sinh</p>
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th class="text-center" style="width:5%">#</th>
                                        <th style="width:50%">Chỉ Định</th>
                                        <th style="width:50%">Thành Tiền</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @for (int i = 0; i < ViewBag.ViSinh.Count; i++)
                                    {
                                        totalVS += ViewBag.ViSinh[i].ViSinh.Price;
                                        <tr>
                                            <td class="text-center">@(i + 1)</td>
                                            <td>@ViewBag.ViSinh[i].ViSinh.NameTest</td>
                                            <td>@ViewBag.ViSinh[i].ViSinh.Price.ToString("N0")</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                            <p><strong>Tổng Tiền: </strong>@totalVS.ToString("N0") VNĐ</p>
                        </div>
                    }
                    <div class="row body-pay">
                        <div class="col-xs-6 text-right pull-right invoice-total">
                            @*<p>Subtotal : @()</p>
        <p>Discount (10%) : $101 </p>
        <p>VAT (8%) : $73 </p>*@
                            @if (Model.InformationExamination.PriceCTMaus == null)
                            {
                                <p><strong>Tổng Thanh Toán: </strong>@((totalSHM + totalDM + totalNM + totalNT + totalMD + totalDCD + totalVS).ToString("N0")) VNĐ </p>
                            }
                            else
                            {
                                <p><strong>Tổng Thanh Toán: </strong>@((Model.InformationExamination.PriceCTMaus + totalSHM + totalDM + totalNM + totalNT + totalMD + totalDCD + totalVS).Value.ToString("N0")) VNĐ </p>
                            }
                        </div>
                    </div>

                    <div class="row body-pay">
                        <div class="col-xs-6 margintop">
                            <p class="lead marginbottom" style="text-align:center;margin-bottom:10rem">Thu Ngân</p>
                        </div>
                        <div class="col-xs-6 margintop">
                            <p class="lead marginbottom" style="text-align:center;">THANK YOU!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>